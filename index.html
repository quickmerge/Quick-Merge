<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quick Merge – Merge, Compress & Convert Files Instantly</title>
  <meta name="description" content="Quick Merge offers fast, secure file processing tools including PDF merging, splitting, compression, image conversion, and QR code generation - all processed locally in your browser.">
  <meta name="keywords" content="PDF merge, PDF split, compress PDF, image to PDF, QR code generator, file converter, online tools, privacy-focused tools">
  <meta name="author" content="Quick Merge">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Quick Merge - File Processing Tools">
  <meta property="og:description" content="Merge, compress and convert files instantly with our privacy-focused browser tools">
  <meta property="og:type" content="website">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://pagead2.googlesyndication.com">
  <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
  <link rel="preconnect" href="https://www.gstatic.com">
  <link rel="dns-prefetch" href="https://www.gstatic.com">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4141481490330428"
       crossorigin="anonymous"></script>
  
  <style>
    /* Universal Box-Sizing */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Body & Global Typography */
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #0f0f10, #111215);
      color: #f0f0f0;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Anchor Tag Styling */
    a {
      text-decoration: none;
      color: inherit;
    }

    /* Header Styles */
    header {
      background: rgba(15, 15, 16, 0.95);
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: auto;
      padding: 1rem 2rem;
    }

    .nav h1 {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(90deg, #00f6ff, #6c5dd3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .nav .nav-links {
      display: flex;
      gap: 1.5rem;
    }

    .nav .nav-links a {
      font-size: 1rem;
      color: #ccc;
      transition: color 0.2s;
    }

    .nav .nav-links a:hover {
      color: #fff;
    }

    /* Mobile Menu Styles */
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      color: #ccc;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .mobile-menu {
      display: none;
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      background: rgba(15, 15, 16, 0.98);
      padding: 1rem;
      z-index: 999;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .mobile-menu.active {
      display: block;
    }

    .mobile-menu a {
      display: block;
      padding: 0.8rem 1rem;
      color: #ccc;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .mobile-menu a:hover {
      color: #fff;
      background: rgba(108, 93, 211, 0.1);
    }

    /* Main Container & Hero Section */
    .container {
      max-width: 1200px;
      margin: auto;
      padding: 2rem;
      flex: 1;
    }

    .hero {
      text-align: center;
      padding: 5rem 2rem 3rem;
    }

    .hero h2 {
      font-size: 2.8rem;
      background: linear-gradient(90deg, #00f6ff, #6c5dd3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero p {
      color: #aaa;
      margin-top: 1rem;
      font-size: 1.2rem;
    }

    .cta {
      margin-top: 2rem;
    }

    .cta button {
      background: #6c5dd3;
      color: white;
      padding: 0.8rem 1.6rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .cta button:hover {
      background: #5842c3;
    }

    /* Tool Cards Grid */
    .tools {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 2rem;
      margin-top: 4rem;
    }

    .tool-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(14px);
      border-radius: 14px;
      padding: 2rem;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 0 20px rgba(108, 93, 211, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      display: flex; /* Make it a flex container */
      flex-direction: column; /* Stack children vertically */
    }

    .tool-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 0 28px rgba(108, 93, 211, 0.25);
    }

    .tool-card h3 {
      font-size: 1.3rem;
      color: #fff;
      margin-bottom: 0.5rem;
    }

    /* Accordion styles */
    .tool-info-accordion {
        margin-top: 1rem;
        border-top: 1px solid rgba(255,255,255,0.1);
        padding-top: 1rem;
    }

    .accordion-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.7rem 0;
        cursor: pointer;
        color: #00f6ff; /* Highlighted color */
        font-weight: 600;
        font-size: 0.95rem;
        transition: color 0.2s;
    }

    .accordion-header:hover {
        color: #fff;
    }

    .accordion-header i {
        transition: transform 0.3s ease;
        margin-left: 0.5rem;
    }

    .accordion-header.active i {
        transform: rotate(180deg);
    }

    .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s ease-out;
        color: #bbb;
        font-size: 0.9rem;
        padding-bottom: 0; /* No initial padding-bottom */
    }

    .accordion-content.active {
        max-height: 500px; /* Adjust as needed for max content */
        padding-bottom: 1rem; /* Add padding when active */
    }

    .accordion-content p {
        margin-bottom: 0.8rem;
    }
    .accordion-content ul, .accordion-content ol {
        padding-left: 1.2rem;
        margin-bottom: 0.8rem;
    }
    .accordion-content li {
        margin-bottom: 0.4rem;
    }

    /* Tool Content - this is for the functional part of the tool */
    .tool-content {
      display: none;
      margin-top: auto; /* Push the tool content to the bottom of the card */
      border-top: 1px solid rgba(255,255,255,0.1); /* Separator */
      padding-top: 1.5rem;
    }

    .tool-card.active {
      padding-bottom: 2.5rem;
    }

    .tool-card.active .tool-content {
      display: block;
    }

    .file-input {
      width: 100%;
      margin-bottom: 1rem;
    }

    .file-input label {
      display: block;
      margin-bottom: 0.5rem;
      color: #ddd;
      font-size: 0.9rem;
    }

    .file-input input[type="file"] {
      width: 100%;
      padding: 0.5rem;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 6px;
      color: #fff;
      display: none;
    }

    .drag-drop-area {
      width: 100%;
      padding: 2rem;
      border: 2px dashed rgba(255,255,255,0.3);
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 1rem;
    }

    .drag-drop-area:hover {
      border-color: #6c5dd3;
      background: rgba(108, 93, 211, 0.1);
    }

    .drag-drop-area.active {
      border-color: #6c5dd3;
      background: rgba(108, 93, 211, 0.2);
    }

    .drag-drop-area p {
      margin-bottom: 0.5rem;
    }

    .drag-drop-area .small {
      font-size: 0.8rem;
      color: #aaa;
    }

    .file-list {
      margin-top: 1rem;
      max-height: 150px;
      overflow-y: auto;
    }

    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem;
      background: rgba(255,255,255,0.05);
      border-radius: 4px;
      margin-bottom: 0.3rem;
    }

    .file-item-name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 70%;
    }

    .file-item-size {
      font-size: 0.8rem;
      color: #aaa;
    }

    .file-item-remove {
      color: #ff6b6b;
      cursor: pointer;
      margin-left: 0.5rem;
    }

    .tool-btn {
      background: #6c5dd3;
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: 0.3s ease;
      margin-top: 0.5rem;
      width: 100%;
    }

    .tool-btn:hover {
      background: #5842c3;
    }

    .tool-btn.secondary {
      background: transparent;
      border: 1px solid #6c5dd3;
      margin-top: 0.5rem;
    }

    .tool-btn:disabled {
      background: #555;
      cursor: not-allowed;
      opacity: 0.7;
    }

    .options {
      margin: 1rem 0;
    }

    .option-group {
      margin-bottom: 1rem;
    }

    .option-group label {
      display: block;
      margin-bottom: 0.3rem;
      color: #ddd;
      font-size: 0.9rem;
    }

    .option-group input[type="text"],
    .option-group input[type="number"],
    .option-group select,
    .option-group textarea {
      width: 100%;
      padding: 0.5rem;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 6px;
      color: #fff;
    }

    .option-group input[type="range"] {
      width: 100%;
    }

    .option-group input[type="color"] {
      width: 100%;
      height: 40px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .preview-container {
      margin-top: 1rem;
      text-align: center;
    }

    .preview-container img {
      max-width: 100%;
      max-height: 200px;
      border-radius: 6px;
    }

    .qr-code-container {
      display: flex;
      justify-content: center;
      margin: 1rem 0;
    }

    .qr-preview {
      margin: 1rem 0;
      text-align: center;
    }

    .qr-preview canvas {
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* Signature Canvas */
    .signature-container {
      margin: 1rem 0;
      text-align: center;
    }

    .signature-canvas {
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 6px;
      background: rgba(255,255,255,0.05);
      cursor: crosshair;
      margin: 0 auto;
      display: block;
    }

    .signature-options {
      margin-top: 1rem;
    }

    .signature-btn {
      background: #6c5dd3;
      color: white;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 6px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: 0.3s ease;
      margin-right: 0.5rem;
    }

    .signature-btn:hover {
      background: #5842c3;
    }

    .signature-btn.clear {
      background: #ff6b6b;
    }

    .signature-btn.clear:hover {
      background: #e74c3c;
    }

    /* Status messages */
    .status-message {
      margin-top: 1rem;
      padding: 0.5rem;
      border-radius: 4px;
      font-size: 0.9rem;
      text-align: center;
    }

    .status-message.success {
      background: rgba(46, 204, 113, 0.2);
      color: #2ecc71;
    }

    .status-message.error {
      background: rgba(231, 76, 60, 0.2);
      color: #e74c3c;
    }

    .status-message.processing {
      background: rgba(52, 152, 219, 0.2);
      color: #3498db;
    }

    /* About, Contact, Privacy pages styles */
    .content-page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .content-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      flex: 1;
    }

    .content-page h1 {
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      background: linear-gradient(90deg, #00f6ff, #6c5dd3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      padding-bottom: 0.5rem;
    }

    .content-page h2 {
      font-size: 1.8rem;
      margin: 2rem 0 1rem;
      color: #fff;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 0.5rem;
    }

    .content-page h3 {
      font-size: 1.3rem;
      margin: 1.5rem 0 1rem;
      color: #ddd;
    }

    .content-page p {
      margin-bottom: 1.2rem;
      color: #bbb;
      line-height: 1.7;
      font-size: 1.05rem;
    }

    .content-page ul, .content-page ol {
      margin-bottom: 1.5rem;
      padding-left: 2rem;
    }

    .content-page li {
      margin-bottom: 0.7rem;
      color: #bbb;
      line-height: 1.6;
    }

    .feature-list, .contact-box, .policy-section {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(14px);
      border-radius: 14px;
      padding: 1.8rem;
      margin: 2rem 0;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 0 20px rgba(108, 93, 211, 0.08);
    }

    .feature-item {
      margin-bottom: 1rem;
      padding-left: 1rem;
      border-left: 3px solid #6c5dd3;
    }

    .contact-method {
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: rgba(108, 93, 211, 0.1);
      border-radius: 8px;
    }

    .contact-method h3 {
      color: #6c5dd3;
      margin-bottom: 0.5rem;
    }

    .content-page a {
      color: #6c5dd3;
      transition: color 0.2s;
      text-decoration: underline;
    }

    .content-page a:hover {
      color: #00f6ff;
    }

    .update-date {
      font-style: italic;
      color: #aaa;
      margin-bottom: 1.5rem;
      display: block;
      text-align: center;
      font-size: 0.95rem;
    }

    .privacy-notice {
      text-align: center;
      margin: 3rem 0;
      padding: 2rem;
      background: rgba(108, 93, 211, 0.1);
      border-radius: 14px;
      border: 1px solid rgba(108, 93, 211, 0.2);
    }

    .privacy-notice h2 {
      font-size: 2rem;
      background: linear-gradient(90deg, #00f6ff, #6c5dd3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      border: none;
      margin-bottom: 1rem;
    }

    .privacy-notice p {
      font-size: 1.1rem;
      max-width: 700px;
      margin: 0 auto;
    }

    /* Footer Styles */
    footer {
      margin-top: auto;
      padding: 2rem;
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      border-top: 1px solid #222;
    }

    /* Fade In Animation */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Loading spinner */
    .spinner {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Content Section Display Control */
    .content-section {
      display: none;
    }

    .active-section {
      display: block;
    }

    /* Accessibility improvements */
    button:focus, input:focus, select:focus, textarea:focus {
      outline: 2px solid #6c5dd3;
      outline-offset: 2px;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .hero h2 {
        font-size: 2rem;
        line-height: 1.2;
      }

      .hero {
        padding: 3rem 1rem 2rem;
      }

      .content-page h1 {
        font-size: 1.8rem;
      }

      .content-page h2 {
        font-size: 1.5rem;
      }

      .nav .nav-links {
        display: none;
      }

      .mobile-menu-btn {
        display: block;
      }

      .content-container, .container {
        padding: 1rem;
      }
      
      .tools {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      .tool-card {
        padding: 1.5rem;
      }

      .drag-drop-area {
        padding: 1.5rem;
      }

      .option-group {
        margin-bottom: 0.8rem;
      }

      .option-group label {
        font-size: 0.85rem;
      }

      .option-group input[type="text"],
      .option-group input[type="number"],
      .option-group select,
      .option-group textarea {
        padding: 0.4rem;
        font-size: 0.9rem;
      }

      .tool-btn {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }
    }

    @media (max-width: 480px) {
      .hero h2 {
        font-size: 1.7rem;
      }

      .hero p {
        font-size: 1rem;
      }

      .nav {
        padding: 0.8rem 1.1rem;
      }

      .nav h1 {
        font-size: 1.3rem;
      }

      .mobile-menu-btn {
        font-size: 1.3rem;
      }

      .mobile-menu {
        top: 60px;
      }

      .tool-card h3 {
        font-size: 1.2rem;
      }

      .tool-card p {
        font-size: 0.9rem;
      }

      .drag-drop-area {
        padding: 1rem;
      }

      .drag-drop-area p {
        font-size: 0.9rem;
      }

      .drag-drop-area .small {
        font-size: 0.75rem;
      }
    }

    @media (min-width: 769px) {
      .mobile-menu {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KKBN3TSQ');</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KKBN3TSQ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <header>
    <div class="nav">
      <h1>Quick Merge</h1>
      <div class="nav-links">
        <a href="#" onclick="showSection('home')">Home</a>
        <a href="#" onclick="showSection('about')">About</a>
        <a href="#" onclick="showSection('contact')">Contact</a>
        <a href="#" onclick="showSection('privacy')">Privacy</a>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="#" onclick="showSection('home'); toggleMobileMenu()">Home</a>
      <a href="#" onclick="showSection('about'); toggleMobileMenu()">About</a>
      <a href="#" onclick="showSection('contact'); toggleMobileMenu()">Contact</a>
      <a href="#" onclick="showSection('privacy'); toggleMobileMenu()">Privacy</a>
    </div>
  </header>

  <section id="home" class="content-section active-section">
    <section class="hero">
      <div class="container">
        <h2>Merge, Compress & Convert Files Instantly</h2>
        <p>All tools run locally in your browser — fast, private, and secure.</p>
        <div class="cta">
          <button onclick="document.getElementById('tools').scrollIntoView({ behavior: 'smooth' })">Explore Tools</button>
        </div>
      </div>
    </section>

    <section id="tools" class="container">
      <div class="tools">
        <div class="tool-card fade-in" id="merge-pdf-card">
          <h3>Merge PDF</h3>
          <p>Combine multiple PDF files into one seamless document.</p>
          
          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="merge-pdf-about" role="button" aria-expanded="false" aria-controls="merge-pdf-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="merge-pdf-about">
                <p>Our powerful PDF Merge tool allows you to seamlessly combine two or more Portable Document Format (PDF) files into a single, cohesive document. This is perfect for consolidating reports, compiling research papers, or creating a single portfolio from multiple files. Quick Merge offers a fast, secure, and entirely private solution as all merging operations are performed directly in your browser, meaning your sensitive documents never leave your device and are not uploaded to any external servers.</p>
                <p>This tool is ideal for professionals, students, and anyone who needs to streamline their document management. You can easily arrange the order of your PDFs before merging, ensuring the final output meets your exact requirements.</p>
            </div>

            <div class="accordion-header" data-target="merge-pdf-how-to" role="button" aria-expanded="false" aria-controls="merge-pdf-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="merge-pdf-how-to">
                <ol>
                    <li>Click the "Use Tool" button below to open the Merge PDF interface.</li>
                    <li>Drag and drop your PDF files into the designated area, or click to browse and select them from your device. You can select multiple files at once.</li>
                    <li>Once files are loaded, you can rearrange their order by dragging them in the list if needed.</li>
                    <li>Click the "Merge PDFs" button to initiate the process.</li>
                    <li>Your new merged PDF will be automatically downloaded to your device in seconds.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="merge-pdf-benefits" role="button" aria-expanded="false" aria-controls="merge-pdf-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="merge-pdf-benefits">
                <ul>
                    <li><strong>Complete Privacy:</strong> Your documents are never uploaded; all processing happens locally.</li>
                    <li><strong>Blazing Fast:</strong> Merge even large PDF files quickly without server delays.</li>
                    <li><strong>User-Friendly:</strong> Simple drag-and-drop interface for easy file selection.</li>
                    <li><strong>No Installation:</strong> Works directly in your browser on any operating system.</li>
                    <li><strong>Free & Unlimited:</strong> Merge as many PDFs as you need, entirely free of charge.</li>
                    <li><strong>Secure:</strong> Encrypted connections (HTTPS) ensure safe Browse.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('merge-pdf')">Use Tool</button>
          <div class="tool-content" id="merge-pdf">
            <div class="file-input">
              <label for="merge-pdf-files">Select PDF files to merge:</label>
              <div class="drag-drop-area" id="merge-pdf-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for PDF files">
                <p>Drag & drop PDF files here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="merge-pdf-files" accept=".pdf" multiple>
              <div class="file-list" id="merge-pdf-file-list"></div>
            </div>
            <button class="tool-btn" id="merge-pdf-btn" onclick="mergePDFs()" disabled>Merge PDFs</button>
            <div class="spinner" id="merge-pdf-spinner"></div>
            <div class="status-message" id="merge-pdf-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="split-pdf-card">
          <h3>Split PDF</h3>
          <p>Extract selected pages or split PDF into multiple parts.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="split-pdf-about" role="button" aria-expanded="false" aria-controls="split-pdf-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="split-pdf-about">
                <p>Our PDF Splitter allows you to precisely extract selected pages from a PDF document or divide a single PDF into multiple smaller files. This is incredibly useful for isolating specific chapters, removing unnecessary pages, or creating separate documents from a large PDF. Like all our tools, the splitting process occurs entirely within your browser, ensuring your document's privacy and security without any server uploads.</p>
                <p>Whether you need to extract a single crucial page or segment a lengthy report, our tool provides the flexibility and speed you need for efficient document management.</p>
            </div>

            <div class="accordion-header" data-target="split-pdf-how-to" role="button" aria-expanded="false" aria-controls="split-pdf-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="split-pdf-how-to">
                <ol>
                    <li>Click the "Use Tool" button to expand the splitter.</li>
                    <li>Upload your PDF file using drag & drop or by clicking to select it from your device.</li>
                    <li>In the "Pages to extract" field, specify the page numbers or ranges you wish to extract (e.g., `1-3,5,7-9`). You can mix individual pages and ranges.</li>
                    <li>Click the "Split PDF" button.</li>
                    <li>Your new PDF containing the extracted pages will be downloaded automatically.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="split-pdf-benefits" role="button" aria-expanded="false" aria-controls="split-pdf-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="split-pdf-benefits">
                <ul>
                    <li><strong>Precise Page Extraction:</strong> Extract individual pages or custom ranges with ease.</li>
                    <li><strong>Data Privacy:</strong> All operations are performed locally on your device, ensuring maximum security.</li>
                    <li><strong>Fast & Efficient:</strong> Split large PDFs quickly without time-consuming uploads.</li>
                    <li><strong>User-Friendly:</strong> Simple interface for selecting pages and ranges.</li>
                    <li><strong>No Hidden Costs:</strong> Free to use without limitations or subscriptions.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('split-pdf')">Use Tool</button>
          <div class="tool-content" id="split-pdf">
            <div class="file-input">
              <label for="split-pdf-file">Select PDF file to split:</label>
              <div class="drag-drop-area" id="split-pdf-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for PDF files">
                <p>Drag & drop a PDF file here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="split-pdf-file" accept=".pdf">
              <div class="file-list" id="split-pdf-file-list"></div>
            </div>
            <div class="options">
              <div class="option-group">
                <label for="split-pages">Pages to extract (e.g., 1-3,5,7-9):</label>
                <input type="text" id="split-pages" placeholder="1-3,5,7-9">
              </div>
            </div>
            <button class="tool-btn" id="split-pdf-btn" onclick="splitPDF()" disabled>Split PDF</button>
            <div class="spinner" id="split-pdf-spinner"></div>
            <div class="status-message" id="split-pdf-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="compress-pdf-card">
          <h3>Compress PDF</h3>
          <p>Reduce PDF file size without losing quality or formatting.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="compress-pdf-about" role="button" aria-expanded="false" aria-controls="compress-pdf-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="compress-pdf-about">
                <p>Reduce the size of your PDF files without compromising their quality or integrity using our PDF Compression tool. This is essential for sending documents via email, uploading them to websites with size limits, or simply saving storage space on your device. Our browser-based compressor intelligently optimizes your PDF by removing redundant information and optimizing internal structures. Crucially, all processing is done locally, ensuring your documents remain completely private.</p>
                <p>We offer various compression levels, allowing you to find the perfect balance between file size reduction and document quality, making it versatile for all your needs.</p>
            </div>

            <div class="accordion-header" data-target="compress-pdf-how-to" role="button" aria-expanded="false" aria-controls="compress-pdf-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="compress-pdf-how-to">
                <ol>
                    <li>Click "Use Tool" to open the compression interface.</li>
                    <li>Drag and drop your PDF file or click to select it from your device.</li>
                    <li>Choose your desired compression level: <strong>Low</strong> (better quality), <strong>Medium</strong> (balanced), <strong>High</strong> (smaller file), or <strong>Extreme</strong> (maximum compression).</li>
                    <li>Select a Compression Mode for additional control (Balanced, Preserve Text Quality, or Preserve Image Quality).</li>
                    <li>Click the "Compress PDF" button.</li>
                    <li>The optimized PDF will download automatically once compressed.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="compress-pdf-benefits" role="button" aria-expanded="false" aria-controls="compress-pdf-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="compress-pdf-benefits">
                <ul>
                    <li><strong>Optimize File Size:</strong> Significantly reduce PDF size for easier sharing and storage.</li>
                    <li><strong>Quality Control:</strong> Choose from various compression levels to balance size and visual fidelity.</li>
                    <li><strong>Local Processing:</strong> Your files are never sent to a server, ensuring maximum privacy.</li>
                    <li><strong>Fast & Reliable:</strong> Quick compression directly in your web browser.</li>
                    <li><strong>Supports All PDFs:</strong> Works with various PDF structures and content types, including those with images and text.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('compress-pdf')">Use Tool</button>
          <div class="tool-content" id="compress-pdf">
            <div class="file-input">
              <label for="compress-pdf-file">Select PDF file to compress:</label>
              <div class="drag-drop-area" id="compress-pdf-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for PDF files">
                <p>Drag & drop a PDF file here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="compress-pdf-file" accept=".pdf">
              <div class="file-list" id="compress-pdf-file-list"></div>
            </div>
            <div class="options">
              <div class="option-group">
                <label for="compression-level">Compression level:</label>
                <select id="compression-level">
                  <option value="low">Low (better quality)</option>
                  <option value="medium" selected>Medium (balanced)</option>
                  <option value="high">High (smaller file)</option>
                  <option value="extreme">Extreme (maximum compression)</option>
                </select>
              </div>
              <div class="option-group">
                <label for="compression-mode">Compression Mode:</label>
                <select id="compression-mode">
                  <option value="balanced">Balanced (recommended)</option>
                  <option value="preserve-text">Preserve Text Quality</option>
                  <option value="preserve-images">Preserve Image Quality</option>
                </select>
              </div>
            </div>
            <button class="tool-btn" id="compress-pdf-btn" onclick="compressPDF()" disabled>Compress PDF</button>
            <div class="spinner" id="compress-pdf-spinner"></div>
            <div class="status-message" id="compress-pdf-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="image-to-pdf-card">
          <h3>Image to PDF</h3>
          <p>Convert one or multiple images to a single PDF document.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="image-to-pdf-about" role="button" aria-expanded="false" aria-controls="image-to-pdf-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="image-to-pdf-about">
                <p>Effortlessly convert one or multiple image files (like JPG, PNG, WebP, etc.) into a single, high-quality PDF document. This tool is perfect for compiling photo albums, creating digital portfolios, archiving scanned documents, or converting any visual content into a universally compatible and shareable format. All image-to-PDF conversions are performed securely in your browser, guaranteeing your visual content remains private and protected.</p>
                <p>You have full control over the page layout and margins, allowing for a professional finish to your digital documents.</p>
            </div>

            <div class="accordion-header" data-target="image-to-pdf-how-to" role="button" aria-expanded="false" aria-controls="image-to-pdf-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="image-to-pdf-how-to">
                <ol>
                    <li>Click "Use Tool" to access the converter.</li>
                    <li>Drag and drop your image files into the upload area. You can select multiple images at once.</li>
                    <li>Choose your desired page layout: <strong>Portrait</strong>, <strong>Landscape</strong>, or <strong>Auto</strong> (to match image orientation).</li>
                    <li>Adjust the margin size in millimeters (mm) if needed, to add white space around your images on the PDF page.</li>
                    <li>Click the "Convert to PDF" button.</li>
                    <li>Your new PDF document, containing all your selected images, will be downloaded instantly.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="image-to-pdf-benefits" role="button" aria-expanded="false" aria-controls="image-to-pdf-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="image-to-pdf-benefits">
                <ul>
                    <li><strong>Multi-Image Support:</strong> Combine numerous images into one cohesive PDF.</li>
                    <li><strong>Layout Control:</strong> Define page orientation and margins for professional results.</li>
                    <li><strong>Browser-Based:</strong> No uploads, ensuring maximum privacy for your images.</li>
                    <li><strong>High-Quality Output:</strong> Images are embedded into the PDF with optimal clarity.</li>
                    <li><strong>Versatile Use:</strong> Ideal for portfolios, archives, presentations, or sharing image collections.</li>
                    <li><strong>Supports Common Formats:</strong> Works with JPG, PNG, and automatically converts others.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('image-to-pdf')">Use Tool</button>
          <div class="tool-content" id="image-to-pdf">
            <div class="file-input">
              <label for="image-to-pdf-files">Select image(s) to convert:</label>
              <div class="drag-drop-area" id="image-to-pdf-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for image files">
                <p>Drag & drop images here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="image-to-pdf-files" accept="image/*" multiple>
              <div class="file-list" id="image-to-pdf-file-list"></div>
            </div>
            <div class="options">
              <div class="option-group">
                <label for="pdf-layout">Page Layout:</label>
                <select id="pdf-layout">
                  <option value="portrait">Portrait</option>
                  <option value="landscape">Landscape</option>
                  <option value="auto">Auto (match image orientation)</option>
                </select>
              </div>
              <div class="option-group">
                <label for="pdf-margin">Margin (mm):</label>
                <input type="number" id="pdf-margin" min="0" max="50" value="5">
              </div>
            </div>
            <button class="tool-btn" id="image-to-pdf-btn" onclick="convertImagesToPDF()" disabled>Convert to PDF</button>
            <div class="spinner" id="image-to-pdf-spinner"></div>
            <div class="status-message" id="image-to-pdf-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="text-converter-card">
          <h3>Text to PDF</h3>
          <p>Convert plain text to professional PDF documents.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="text-converter-about" role="button" aria-expanded="false" aria-controls="text-converter-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="text-converter-about">
                <p>Transform your plain text content into professional-looking PDF documents instantly with our Text to PDF converter. This tool is ideal for quickly saving notes, code snippets, articles, emails, or any textual content into a universal, non-editable format suitable for sharing, printing, and long-term archiving. All processing is done locally within your browser, guaranteeing the privacy and security of your written content.</p>
                <p>Simply paste your text, and let the tool create a clean, readable PDF for you without any complex settings.</p>
            </div>

            <div class="accordion-header" data-target="text-converter-how-to" role="button" aria-expanded="false" aria-controls="text-converter-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="text-converter-how-to">
                <ol>
                    <li>Click "Use Tool" to reveal the text input area.</li>
                    <li>Type or paste your desired text content into the large text box.</li>
                    <li>Optionally, enter a custom filename for your output PDF in the designated field.</li>
                    <li>Click the "Convert to PDF" button.</li>
                    <li>Your text will be converted and downloaded as a PDF document.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="text-converter-benefits" role="button" aria-expanded="false" aria-controls="text-converter-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="text-converter-benefits">
                <ul>
                    <li><strong>Simple & Fast:</strong> Convert text to PDF in just a few clicks.</li>
                    <li><strong>Privacy-Focused:</strong> No text content leaves your device; processing is entirely local.</li>
                    <li><strong>Custom Filename:</strong> Name your PDF exactly as you need for better organization.</li>
                    <li><strong>Universal Compatibility:</strong> Create standard PDFs viewable on any device or operating system.</li>
                    <li><strong>Clean Output:</strong> Generates a clean, readable PDF from your plain text input.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('text-converter')">Use Tool</button>
          <div class="tool-content" id="text-converter">
            <div class="options">
              <div class="option-group">
                <label for="text-content">Enter your text:</label>
                <textarea id="text-content" rows="8" placeholder="Type or paste your text here..."></textarea>
              </div>
              <div class="option-group">
                <label for="text-filename">File name (without extension):</label>
                <input type="text" id="text-filename" placeholder="document">
              </div>
            </div>
            <button class="tool-btn" id="text-convert-btn" onclick="convertTextToPDF()">Convert to PDF</button>
            <button class="tool-btn secondary" id="enhance-text-btn" onclick="enhanceTextContent()">Enhance Text ✨</button>
            <div class="spinner" id="text-converter-spinner"></div>
            <div class="status-message" id="text-converter-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="pdf-to-word-card">
          <h3>PDF to Word</h3>
          <p>Convert PDF documents to editable Word files.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="pdf-to-word-about" role="button" aria-expanded="false" aria-controls="pdf-to-word-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="pdf-to-word-about">
                <p>Our PDF to Word converter extracts the textual content from your PDF documents and converts it into an editable Microsoft Word (.docx) or Rich Text Format (.rtf) file. This is perfect for when you need to repurpose content from a PDF, make edits, or copy text without losing its structure. Please note that due to the complexity of PDF layouts and the nature of client-side text extraction, complex formatting, images, and non-text elements might not be perfectly preserved. Your files remain private as conversion occurs in your browser.</p>
                <p>This tool excels at extracting pure text and simple structures, providing a solid base for further editing in a Word processor.</p>
            </div>

            <div class="accordion-header" data-target="pdf-to-word-how-to" role="button" aria-expanded="false" aria-controls="pdf-to-word-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="pdf-to-word-how-to">
                <ol>
                    <li>Click "Use Tool" to open the converter.</li>
                    <li>Upload your PDF file via drag & drop or by clicking to browse.</li>
                    <li>Select your preferred output format: <strong>.docx</strong> (Microsoft Word Document) or <strong>.rtf</strong> (Rich Text Format).</li>
                    <li>Click the "Convert to Word" button.</li>
                    <li>Your new editable Word or RTF file will be downloaded directly to your device.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="pdf-to-word-benefits" role="button" aria-expanded="false" aria-controls="pdf-to-word-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="pdf-to-word-benefits">
                <ul>
                    <li><strong>Editable Output:</strong> Get your PDF content into an editable format for easy modifications.</li>
                    <li><strong>Privacy Assured:</strong> Files are processed client-side; no uploads to external servers.</li>
                    <li><strong>Fast & Easy:</strong> Quick conversion with minimal steps and a user-friendly interface.</li>
                    <li><strong>Multiple Formats:</strong> Choose between industry-standard DOCX and RTF outputs.</li>
                    <li><strong>Free Online Tool:</strong> Convert PDFs to Word for free, anytime, without software installation.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('pdf-to-word')">Use Tool</button>
          <div class="tool-content" id="pdf-to-word">
            <div class="file-input">
              <label for="pdf-to-word-file">Select PDF file to convert:</label>
              <div class="drag-drop-area" id="pdf-to-word-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for PDF files">
                <p>Drag & drop a PDF file here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="pdf-to-word-file" accept=".pdf">
              <div class="file-list" id="pdf-to-word-file-list"></div>
            </div>
            <div class="options">
              <div class="option-group">
                <label for="word-format">Output Format:</label>
                <select id="word-format">
                  <option value="docx">Word Document (.docx)</option>
                  <option value="rtf">Rich Text Format (.rtf)</option>
                </select>
              </div>
            </div>
            <button class="tool-btn" id="pdf-to-word-btn" onclick="convertPDFToWord()" disabled>Convert to Word</button>
            <div class="spinner" id="pdf-to-word-spinner"></div>
            <div class="status-message" id="pdf-to-word-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="pdf-signer-card">
          <h3>Sign PDF</h3>
          <p>Add your signature to PDF documents.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="pdf-signer-about" role="button" aria-expanded="false" aria-controls="pdf-signer-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="pdf-signer-about">
                <p>Digitally sign your PDF documents directly in your browser with our intuitive PDF Signer. You can draw your signature using your mouse or touchscreen, and then place it precisely onto any page of your PDF. This tool is ideal for quickly signing contracts, agreements, or forms without the need for printing, signing by hand, and scanning. Your signature and document privacy are guaranteed as all operations are client-side, meaning no uploads whatsoever.</p>
                <p>Streamline your workflow and handle digital documents efficiently with this secure and easy-to-use signing solution.</p>
            </div>

            <div class="accordion-header" data-target="pdf-signer-how-to" role="button" aria-expanded="false" aria-controls="pdf-signer-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="pdf-signer-how-to">
                <ol>
                    <li>Click "Use Tool" to access the signing interface.</li>
                    <li>Upload the PDF file you wish to sign using the drag & drop area or file selector.</li>
                    <li>Adjust the page number where you want to place the signature, its position (e.g., Bottom Right), and the desired size (Small, Medium, Large, or Custom).</li>
                    <li>Use the drawing canvas to create your signature. Once you're happy, click "Save Signature".</li>
                    <li>Click the "Sign PDF" button.</li>
                    <li>Your signed PDF will be downloaded instantly to your device.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="pdf-signer-benefits" role="button" aria-expanded="false" aria-controls="pdf-signer-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="pdf-signer-benefits">
                <ul>
                    <li><strong>Secure Signing:</strong> All signing processes occur locally in your browser, maintaining privacy.</li>
                    <li><strong>Customizable Placement:</strong> Choose exactly where your signature appears on the page.</li>
                    <li><strong>Adjustable Size:</strong> Control the size and dimensions of your digital signature.</li>
                    <li><strong>No Special Software:</strong> Sign PDFs online without installing any desktop applications.</li>
                    <li><strong>Efficient Workflow:</strong> Streamline your document signing process for speed and convenience.</li>
                    <li><strong>Intuitive Drawing:</strong> Easy-to-use canvas for creating your unique signature.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('pdf-signer')">Use Tool</button>
          <div class="tool-content" id="pdf-signer">
            <div class="file-input">
              <label for="pdf-signer-file">Select PDF file to sign:</label>
              <div class="drag-drop-area" id="pdf-signer-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for PDF files">
                <p>Drag & drop a PDF file here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="pdf-signer-file" accept=".pdf">
              <div class="file-list" id="pdf-signer-file-list"></div>
            </div>
            <div class="options">
              <div class="option-group">
                <label for="signature-page">Page Number to Sign:</label>
                <input type="number" id="signature-page" min="1" value="1">
              </div>
              <div class="option-group">
                <label for="signature-position">Signature Position:</label>
                <select id="signature-position">
                  <option value="bottom-right">Bottom Right</option>
                  <option value="bottom-left">Bottom Left</option>
                  <option value="top-right">Top Right</option>
                  <option value="top-left">Top Left</option>
                  <option value="center">Center</option>
                </select>
              </div>
              <div class="option-group">
                <label for="signature-size">Signature Size:</label>
                <select id="signature-size">
                  <option value="small">Small</option>
                  <option value="medium" selected>Medium</option>
                  <option value="large">Large</option>
                  <option value="custom">Custom</option>
                </select>
              </div>
              <div class="option-group" id="custom-size-group" style="display:none;">
                <label for="custom-width">Custom Width (px):</label>
                <input type="number" id="custom-width" min="50" max="500" value="150">
              </div>
            </div>
            <div class="signature-container">
              <label>Draw your signature:</label>
              <canvas id="signature-canvas" width="400" height="200" class="signature-canvas"></canvas>
              <div class="signature-options">
                <button class="signature-btn clear" onclick="clearSignature()">Clear</button>
                <button class="signature-btn" onclick="saveSignature()">Save Signature</button>
              </div>
            </div>
            <button class="tool-btn" id="sign-pdf-btn" onclick="signPDF()" disabled>Sign PDF</button>
            <div class="spinner" id="pdf-signer-spinner"></div>
            <div class="status-message" id="pdf-signer-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="compress-image-card">
          <h3>Compress Images</h3>
          <p>Smartly compress JPEG, PNG, or WebP images with advanced algorithms.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="compress-image-about" role="button" aria-expanded="false" aria-controls="compress-image-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="compress-image-about">
                <p>Optimize your JPEG, PNG, or WebP images with our smart image compression tool. This significantly reduces file sizes, leading to faster website loading times, easier email attachments, and more efficient storage. Our advanced, browser-based algorithms ensure maximum size reduction while preserving visual quality as much as possible. All image compression takes place securely within your browser, ensuring your photos and graphics remain completely private.</p>
                <p>You can fine-tune the compression quality, resize images, and even convert them to different formats for optimal results.</p>
            </div>

            <div class="accordion-header" data-target="compress-image-how-to" role="button" aria-expanded="false" aria-controls="compress-image-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="compress-image-how-to">
                <ol>
                    <li>Click "Use Tool" to open the image compression interface.</li>
                    <li>Drag and drop your image files into the upload area, or click to browse and select them from your device.</li>
                    <li>Adjust the "Quality" slider (from 0 to 100%) to find the perfect balance between file size and visual fidelity.</li>
                    <li>Optionally, set a maximum width for resizing your images to a specific pixel dimension.</li>
                    <li>Choose your desired output format: <strong>Keep original format</strong>, <strong>JPEG</strong>, <strong>PNG</strong>, or <strong>WebP</strong>.</li>
                    <li>Select an "Advanced Compression" mode (Balanced, Aggressive for smaller files, or Conservative for better quality).</li>
                    <li>Click the "Compress Images" button. Your compressed images will be downloaded as a ZIP archive.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="compress-image-benefits" role="button" aria-expanded="false" aria-controls="compress-image-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="compress-image-benefits">
                <ul>
                    <li><strong>Optimal Compression:</strong> Significantly reduce image file sizes for faster web performance and sharing.</li>
                    <li><strong>Maintain Quality:</strong> Fine-tune compression quality and choose advanced modes to meet your specific needs.</li>
                    <li><strong>Privacy-Friendly:</strong> All image processing is done client-side; your photos are never uploaded.</li>
                    <li><strong>Batch Processing:</strong> Compress multiple images simultaneously in one go.</li>
                    <li><strong>Output Format Control:</strong> Choose output as JPG, PNG, or WebP for maximum compatibility and efficiency.</li>
                    <li><strong>Resizing Option:</strong> Resize images to specific dimensions during compression.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('compress-image')">Use Tool</button>
          <div class="tool-content" id="compress-image">
            <div class="file-input">
              <label for="compress-image-files">Select image(s) to compress:</label>
              <div class="drag-drop-area" id="compress-image-drop-area" tabindex="0" role="button" aria-label="Drag and drop area for image files">
                <p>Drag & drop images here</p>
                <p class="small">or click to browse</p>
              </div>
              <input type="file" id="compress-image-files" accept="image/*" multiple>
              <div class="file-list" id="compress-image-file-list"></div>
            </div>
            <div class="options">
              <div class="option-group">
                <label for="image-quality">Quality (0-100):</label>
                <input type="range" id="image-quality" min="0" max="100" value="80">
                <span id="quality-value">80%</span>
              </div>
              <div class="option-group">
                <label for="image-resize">Resize to max width (px):</label>
                <input type="number" id="image-resize" min="100" max="5000" placeholder="Leave empty for no resizing">
              </div>
              <div class="option-group">
                <label for="output-format">Output format:</label>
                <select id="output-format">
                  <option value="original">Keep original format</option>
                  <option value="jpeg">JPEG</option>
                  <option value="png">PNG</option>
                  <option value="webp">WebP (best compression)</option>
                </select>
              </div>
              <div class="option-group">
                <label for="advanced-compression">Advanced Compression:</label>
                <select id="advanced-compression">
                  <option value="balanced">Balanced (recommended)</option>
                  <option value="aggressive">Aggressive (smaller files)</option>
                  <option value="conservative">Conservative (better quality)</option>
                </select>
              </div>
            </div>
            <button class="tool-btn" id="compress-image-btn" onclick="compressImages()" disabled>Compress Images</button>
            <div class="preview-container" id="image-preview"></div>
            <div class="spinner" id="compress-image-spinner"></div>
            <div class="status-message" id="compress-image-status"></div>
          </div>
        </div>

        <div class="tool-card fade-in" id="qr-code-card">
          <h3>Advanced QR Code Generator</h3>
          <p>Create stylish QR codes with logos, custom colors, and patterns.</p>

          <div class="tool-info-accordion">
            <div class="accordion-header" data-target="qr-code-about" role="button" aria-expanded="false" aria-controls="qr-code-about">
                <span>About this Tool</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="qr-code-about">
                <p>Create highly customizable QR codes with our advanced generator. You can embed various types of content, such as URLs, plain text, contact information, Wi-Fi details, and more. What sets our tool apart is the ability to personalize your QR code with custom colors, unique dot styles, and distinct corner patterns, making your QR codes not just functional but also visually appealing. This tool is perfect for marketing campaigns, personal use, or quickly sharing information digitally. All QR code generation happens instantly and securely in your browser, ensuring your data remains private.</p>
                <p>Design a QR code that truly stands out and represents your brand or message effectively.</p>
            </div>

            <div class="accordion-header" data-target="qr-code-how-to" role="button" aria-expanded="false" aria-controls="qr-code-how-to">
                <span>How to Use</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="qr-code-how-to">
                <ol>
                    <li>Click "Use Tool" to reveal the QR code options.</li>
                    <li>Enter the content you want to embed (e.g., a website URL, text message, Wi-Fi details) into the "QR Code Content" field.</li>
                    <li>Adjust the "Size" of the QR code in pixels to fit your needs.</li>
                    <li>Choose your desired "Foreground Color" (for the dots) and "Background Color."</li>
                    <li>Experiment with different "Dot Style" and "Corner Style" options to create a unique look for your QR code.</li>
                    <li>Click the "Generate QR Code" button to see a live preview of your customized QR code.</li>
                    <li>Click "Download QR Code" to save your customized QR code as a high-quality PNG image.</li>
                </ol>
            </div>

            <div class="accordion-header" data-target="qr-code-benefits" role="button" aria-expanded="false" aria-controls="qr-code-benefits">
                <span>Benefits & Features</span> <i class="fas fa-chevron-down"></i>
            </div>
            <div class="accordion-content" id="qr-code-benefits">
                <ul>
                    <li><strong>Highly Customizable Design:</strong> Personalize colors, dot, and corner styles for unique QR codes.</li>
                    <li><strong>Versatile Content:</strong> Embed URLs, text, email, phone numbers, and various other data types.</li>
                    <li><strong>Instant Generation:</strong> Create QR codes on the fly with a live preview.</li>
                    <li><strong>High-Quality Output:</strong> Downloadable as a crisp PNG image suitable for print and digital use.</li>
                    <li><strong>No Server Interaction:</strong> Your data remains private and secure during the generation process.</li>
                    <li><strong>User-Friendly Interface:</strong> Easy to navigate options for quick customization.</li>
                </ul>
            </div>
          </div>

          <button class="tool-btn" onclick="toggleTool('qr-code')">Use Tool</button>
          <div class="tool-content" id="qr-code">
            <div class="options">
              <div class="option-group">
                <label for="qr-content">QR Code Content:</label>
                <input type="text" id="qr-content" placeholder="https://example.com">
              </div>
              <div class="option-group">
                <label for="qr-size">Size (px):</label>
                <input type="number" id="qr-size" min="100" max="1000" value="300">
              </div>
              <div class="option-group">
                <label for="qr-color">Foreground Color:</label>
                <input type="color" id="qr-color" value="#000000">
              </div>
              <div class="option-group">
                <label for="qr-bg-color">Background Color:</label>
                <input type="color" id="qr-bg-color" value="#ffffff">
              </div>
              <div class="option-group">
                <label for="qr-dot-type">Dot Style:</label>
                <select id="qr-dot-type">
                  <option value="square">Square</option>
                  <option value="dots">Dots</option>
                  <option value="rounded">Rounded</option>
                  <option value="extra-rounded">Extra Rounded</option>
                  <option value="classy">Classy</option>
                  <option value="classy-rounded">Classy Rounded</option>
                </select>
              </div>
              <div class="option-group">
                <label for="qr-corner-type">Corner Style:</label>
                <select id="qr-corner-type">
                  <option value="square">Square</option>
                  <option value="extra-rounded">Extra Rounded</option>
                  <option value="dot">Dot</option>
                </select>
              </div>
            </div>
            <button class="tool-btn" id="generate-qr-btn" onclick="generateQRCode()">Generate QR Code</button>
            <div class="qr-preview" id="qr-preview"></div>
            <button class="tool-btn secondary" id="download-qr-btn" style="display:none;" onclick="downloadQRCode()">Download QR Code</button>
            <div class="status-message" id="qr-code-status"></div>
          </div>
        </div>
      </div>
    </section>
  </section>

  <section id="about" class="content-section content-page">
    <div class="content-container">
      <h1 class="fade-in">About Quick Merge</h1>
      
      <p class="fade-in">Welcome to Quick Merge, your premier destination for fast, secure, and private online file processing. In today's digital world, managing documents and media efficiently is crucial, but so is protecting your sensitive information. We founded Quick Merge with a clear mission: to provide powerful, professional-grade file manipulation tools that operate entirely within your browser, ensuring your data never leaves your device.</p>
      <p class="fade-in">Unlike many other online file converters and editors, Quick Merge prioritizes your privacy above all else. We believe you shouldn't have to compromise security for convenience. Our innovative client-side processing architecture means that when you merge, compress, convert, or sign a file, the entire operation happens locally on your computer. This eliminates the need for file uploads to external servers, protecting your confidential documents from potential breaches and ensuring complete anonymity.</p>
      
      <div class="feature-list fade-in">
        <h2>Why Quick Merge Stands Out</h2>
        <div class="feature-item">
          <strong>Unmatched Privacy & Security:</strong> Your files are processed directly in your browser, ensuring they never touch our servers or any third-party clouds. This offers the highest level of data protection for sensitive documents.
        </div>
        <div class="feature-item">
          <strong>Blazing Fast Performance:</strong> With no server uploads or downloads, our tools execute operations at lightning speed, delivering results instantly. Experience seamless processing even with large files.
        </div>
        <div class="feature-item">
          <strong>Absolutely No Account Required:</strong> Jump straight into using our tools without the hassle of registration, logins, or subscriptions. We believe in immediate access and ultimate convenience.
        </div>
        <div class="feature-item">
          <strong>Professional-Grade Functionality:</strong> Our suite includes robust tools for PDF merging, splitting, compression, image conversion, text-to-PDF, PDF signing, and advanced QR code generation, all designed for precision and reliability.
        </div>
        <div class="feature-item">
          <strong>Universal Compatibility:</strong> Quick Merge works flawlessly across all modern web browsers and devices, providing a consistent and reliable experience whether you're on a desktop, laptop, or mobile device.
        </div>
      </div>
      
      <h2 class="fade-in">Our Technology: The Power of Client-Side Processing</h2>
      <p class="fade-in">Quick Merge leverages cutting-edge web technologies to deliver its unique privacy-focused experience. Our core principle is client-side processing, which means:</p>
      <ul class="fade-in">
        <li><strong>Zero Data Transmission:</strong> When you use our tools, your files are loaded into your browser's memory and processed there. They are never transmitted over the internet to our servers or any third-party services.</li>
        <li><strong>Enhanced Security:</strong> By keeping your data local, we eliminate the risks associated with server-side processing, such as data breaches during transit or storage.</li>
        <li><strong>Instant Results:</strong> Without the need to upload and download files, operations complete much faster, saving you valuable time and bandwidth.</li>
        <li><strong>Automatic Cleanup:</strong> All temporary data generated during processing is automatically purged from your browser's memory the moment you close the tab or navigate away.</li>
      </ul>
      <p class="fade-in">We utilize powerful JavaScript libraries and Web APIs, including PDF-lib for advanced PDF manipulation, JSZip for efficient file archiving, and browser-image-compression for smart image optimization. Our commitment to a secure processing environment is paramount, with regular code audits to maintain the highest standards.</p>
      
      <h2 class="fade-in">Who Benefits from Quick Merge?</h2>
      <p class="fade-in">Our versatile tools are designed to empower a wide range of users across various industries and personal needs:</p>
      <ul class="fade-in">
        <li><strong>Legal Professionals:</strong> Securely merge case documents, redact sensitive information, or sign contracts without risking confidential data exposure.</li>
        <li><strong>Healthcare Providers:</strong> Manage patient records, consent forms, and medical reports with absolute privacy, adhering to strict data protection regulations.</li>
        <li><strong>Financial Analysts:</strong> Compile confidential reports, merge spreadsheets, and compress large financial documents without uploading sensitive figures.</li>
        <li><strong>Students and Educators:</strong> Organize research materials, merge lecture notes, convert images for assignments, or compress large files for easy submission.</li>
        <li><strong>Business Professionals:</strong> Prepare presentations, merge contracts, compress images for web use, and generate custom QR codes for marketing materials, all while maintaining corporate data integrity.</li>
        <li><strong>Everyday Users:</strong> Anyone who needs quick, reliable, and private file conversion, compression, or editing for personal documents, photos, and more.</li>
      </ul>
      <p class="fade-in">At Quick Merge, we are continuously working to expand our suite of tools and enhance user experience, always with privacy and performance at the forefront. Thank you for choosing Quick Merge for your file processing needs!</p>
    </div>
  </section>

  <section id="contact" class="content-section content-page">
    <div class="content-container">
      <h1 class="fade-in">Contact Quick Merge</h1>
      
      <p class="fade-in">We are dedicated to providing excellent support and value every piece of feedback from our users. Your insights help us improve Quick Merge and ensure it remains the best privacy-focused file processing tool available. Whether you have a technical question, a suggestion for a new feature, or simply want to share your experience, we're here to listen.</p>
      <p class="fade-in">While our tools operate client-side, meaning we don't handle your files directly, we are fully committed to assisting you with any inquiries related to our website's functionality, performance, or policies. Please choose the most relevant contact method below:</p>
        
      <div class="contact-box fade-in">
        <h2>Get in Touch</h2>
        
        <div class="contact-method">
          <h3>Technical Support & Feature Requests</h3>
          <p>Email: <a href="mailto:danielledawoodk@gmail.com">danielledawoodk@gmail.com</a></p>
          <p>If you encounter any issues while using our tools, have questions about specific features, or wish to suggest new functionalities you'd like to see implemented on Quick Merge, please reach out to our technical support team. We aim to troubleshoot problems efficiently and consider all user suggestions for future updates.</p>
        </div>
        
        <div class="contact-method">
          <h3>Privacy & Data Security Inquiries</h3>
          <p>Email: <a href="mailto:danielledawoodk@gmail.com">danielledawoodk@gmail.com</a></p>
          <p>For any concerns or detailed questions regarding our Privacy Policy, how your data is handled (or not handled, in our case!), or the security measures implemented on our website, please contact our dedicated Privacy Officer. We are transparent about our client-side processing model and are happy to provide further clarification.</p>
        </div>

        <div class="contact-method">
          <h3>Business Partnerships & Media Inquiries</h3>
          <p>Email: <a href="mailto:danielledawoodk@gmail.com">danielledawoodk@gmail.com</a></p>
          <p>If you are interested in exploring potential business collaborations, media features, or have any other professional inquiries, please contact our business development team. We are open to discussing how Quick Merge's unique technology can integrate with other platforms or be featured in relevant publications.</p>
        </div>
      </div>
      
      <h2 class="fade-in">What to Expect When You Contact Us</h2>
      <p class="fade-in">We strive to respond to all inquiries promptly and thoroughly. Here’s what you can expect:</p>
      <ul class="fade-in">
        <li><strong>Typical Response Time:</strong> We aim to reply to all emails within 24-48 hours during business days (Monday-Friday).</li>
        <li><strong>Detailed Assistance:</strong> Our team will provide comprehensive answers and guidance to resolve your queries effectively.</li>
        <li><strong>Confidentiality:</strong> All communications are treated with the utmost confidentiality.</li>
        <li><strong>No Automated Responses:</strong> You'll receive a personalized response from a member of our team.</li>
      </ul>
      
      <h2 class="fade-in">Your Feedback Drives Our Innovation</h2>
      <p class="fade-in">We are constantly working to enhance Quick Merge and your feedback is invaluable to us. Please don't hesitate to share your thoughts on:</p>
      <ul class="fade-in">
        <li>New features you'd like to see implemented to make your workflow even smoother.</li>
        <li>Your overall experience with our current tools – what you love and what could be better.</li>
        <li>Any difficulties or bugs you've encountered, so we can address them swiftly.</li>
        <li>Suggestions for improving our website's interface or user experience.</li>
      </ul>
      <p class="fade-in">Thank you for helping us make Quick Merge even better!</p>
    </div>
  </section>

  <section id="privacy" class="content-section content-page">
    <div class="content-container">
      <h1 class="fade-in">Privacy Policy</h1>
      <p class="update-date fade-in">Last Updated: 21.05.2025</p>
      
      <div class="policy-section fade-in">
        <h2>Our Unwavering Commitment to Your Privacy</h2>
        <p class="fade-in">At Quick Merge, your privacy is not just a feature; it's the foundational principle upon which our entire platform is built. We understand the critical importance of keeping your personal and sensitive documents secure. Unlike most online file processing services that require you to upload your files to their servers, we've engineered Quick Merge to operate with an innovative client-side architecture. This means your files and data never leave your device, ensuring unparalleled privacy and security from start to finish.</p>
        <p class="fade-in">This Privacy Policy outlines our transparent approach to data handling. Because all file processing occurs directly in your web browser, we do not collect, store, or transmit your files or their content. We are committed to maintaining a truly private and anonymous experience for every user.</p>
      </div>
      
      <div class="policy-section fade-in">
        <h2>How We Protect Your Data: The Client-Side Advantage</h2>
        
        <h3>Local Processing Architecture Explained</h3>
        <p>Our unique approach guarantees your data remains under your control:</p>
        <ul>
          <li><strong>Zero Data Transmission:</strong> When you use any tool on Quick Merge (e.g., merging PDFs, compressing images, generating QR codes), your files are loaded directly into your browser's temporary memory. All processing, manipulation, and conversion tasks are performed locally on your computer. Your files are never uploaded to our servers, nor are they shared with any third-party services.</li>
          <li><strong>No Server Storage:</strong> We do not store any of your files or their content on our servers, even temporarily. Once you download your processed file, or close your browser tab, the data is purged from your device's temporary memory.</li>
          <li><strong>Complete Anonymity:</strong> Because we don't receive or store your files, we cannot link any processed data back to you. Your activities on Quick Merge are entirely private and anonymous.</li>
        </ul>
        
        <h3>Security Features & Measures</h3>
        <p>Even though your files stay local, we've implemented robust safeguards to ensure a secure processing environment:</p>
        <ul>
          <li><strong>Modern Encryption Standards:</strong> Our website uses HTTPS (Hypertext Transfer Protocol Secure) to encrypt all communication between your browser and our server. This protects your Browse activity and ensures the integrity of the website's code.</li>
          <li><strong>Sandboxed Execution Environment:</strong> The file processing operations occur within the secure sandbox of your web browser, isolating them from other processes on your device.</li>
          <li><strong>Regular Code Audits:</strong> Our codebase is regularly reviewed and updated to identify and mitigate potential vulnerabilities, ensuring the highest level of security for our client-side operations.</li>
          <li><strong>Dependency Security:</strong> We carefully select and monitor third-party JavaScript libraries (like PDF-lib, JSZip, browser-image-compression) to ensure they adhere to security best practices and do not compromise your privacy.</li>
        </ul>
      </div>
      
      <div class="policy-section fade-in">
        <h2>Information We DO NOT Collect</h2>
        <p>To be absolutely clear about our privacy stance, Quick Merge explicitly states that we DO NOT collect:</p>
        <ul>
            <li>Your uploaded files or their content.</li>
            <li>Any personal identifying information (like your name, email address, IP address, or location) that could be linked to your file processing activities.</li>
            <li>Usage data tied to individual users or specific file operations.</li>
            <li>Cookies for tracking or personalization purposes.</li>
        </ul>
        <p>We use Google Tag Manager (GTM-KKBN3TSQ) solely for general, aggregated website performance and traffic analysis (e.g., number of page views, popular tools). This data is completely anonymous and cannot be used to identify individual users or their file processing activities. It helps us understand overall site usage and improve our service.</p>
      </div>

      <div class="policy-section fade-in">
        <h2>Your Rights & Control Over Your Data</h2>
        <p>Given our local processing model, you inherently retain full control over your data:</p>
        <ul>
          <li><strong>Right to Access:</strong> You always have direct access to your files on your device.</li>
          <li><strong>Right to Rectification:</strong> You can modify your files directly on your device.</li>
          <li><strong>Right to Erasure:</strong> Once you close your browser tab or delete the downloaded file, your data is gone from our operational scope. We never have a copy to "erase" from our end because we never received it.</li>
          <li><strong>Right to Object:</strong> By choosing to use our client-side tools, you are exercising your right to object to server-side data processing.</li>
        </ul>
        <p>Your control is fundamental to our service.</p>
      </div>
      
      <div class="policy-section fade-in">
        <h2>Policy Updates</h2>
        <p>We may occasionally update this Privacy Policy to reflect:</p>
        <ul>
          <li>Introduction of new client-side features that maintain our privacy standards.</li>
          <li>Changes in applicable laws and regulations regarding online privacy.</li>
          <li>Improvements to our security documentation and transparency.</li>
        </ul>
        <p>We encourage you to review this policy periodically to stay informed about how we're protecting your information. Any significant changes will be highlighted on our website.</p>
      </div>
      
      <div class="policy-section fade-in">
        <h2>Contact Us Regarding Privacy</h2>
        <p>For any questions, concerns, or requests related to this Privacy Policy or our data handling practices, please do not hesitate to contact our Privacy Officer directly at <a href="mailto:danielledawoodk@gmail.com">danielledawoodk@gmail.com</a>. We are committed to addressing all inquiries promptly and transparently.</p>
      </div>
    </div>
  </section>

  <footer>
    © 2025 Quick Merge – All rights reserved.
  </footer>

  <script>
    // Navigation function
    function showSection(sectionId) {
      // Hide all sections
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active-section');
      });
      
      // Show the selected section
      document.getElementById(sectionId).classList.add('active-section');
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Trigger animations for the new section
      if (sectionId !== 'home') {
        setTimeout(() => {
          setupAnimations();
        }, 50);
      } else {
        // Explicitly make tool cards visible when home section is active
        const toolCards = document.querySelectorAll('#tools .tool-card.fade-in');
        toolCards.forEach(card => {
            card.classList.add('visible');
        });
      }
    }

    // Toggle mobile menu
    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      mobileMenu.classList.toggle('active');
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
      const mobileMenu = document.getElementById('mobileMenu');
      const menuBtn = document.querySelector('.mobile-menu-btn');
      
      if (!mobileMenu.contains(event.target) && event.target !== menuBtn && !menuBtn.contains(event.target)) {
        mobileMenu.classList.remove('active');
      }
    });

    // Close mobile menu on resize for desktop view
    window.addEventListener('resize', function() {
      const mobileMenu = document.getElementById('mobileMenu');
      if (window.innerWidth >= 769) { // Adjust breakpoint as needed
        mobileMenu.classList.remove('active');
      }
    });

    let signatureImage = null; // Stored signature image dataURL

    // Centralized library loading tracker and loader
    const loadedLibraries = {
        'pdf-lib': false,
        'filesaver': false,
        'jszip': false,
        'docx': false,
        'pdfjslib': false,
        'pdfjs_worker_set': false, // To track if workerSrc is set
        'browser-image-compression': false,
        'qrcode-styling': false
    };

    const libraryUrls = {
        'pdf-lib': 'https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js',
        'filesaver': 'https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js',
        'jszip': 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js',
        'docx': 'https://cdn.jsdelivr.net/npm/docx@7.8.2/build/index.min.js',
        'pdfjslib': 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js',
        'pdfjs_worker': 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js',
        'browser-image-compression': 'https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.min.js',
        'qrcode-styling': 'https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js'
    };

    const loadingPromises = {}; // To store promises for scripts currently being loaded

    /**
     * Dynamically loads a JavaScript file and returns a Promise that resolves when the script is loaded.
     * Prevents redundant loading of the same script.
     * @param {string} key The key for the library (e.g., 'pdf-lib').
     * @returns {Promise<void>} A Promise that resolves when the script is loaded.
     */
    function loadScript(key) {
        if (loadedLibraries[key]) {
            return Promise.resolve(); // Already loaded
        }
        if (loadingPromises[key]) {
            return loadingPromises[key]; // Already loading, return existing promise
        }

        const url = libraryUrls[key];
        if (!url) {
            return Promise.reject(new Error(`Unknown library key: ${key}`));
        }

        loadingPromises[key] = new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = url;
            script.onload = () => {
                loadedLibraries[key] = true;
                delete loadingPromises[key]; // Remove promise once loaded
                resolve();
            };
            script.onerror = () => {
                delete loadingPromises[key]; // Remove promise on error
                reject(new Error(`Failed to load script for ${key}: ${url}`));
            };
            document.head.appendChild(script);
        });

        return loadingPromises[key];
    }

    /**
     * Ensures all necessary libraries for a specific tool are loaded.
     * @param {string} toolId The ID of the tool.
     * @returns {Promise<void>} A Promise that resolves when all necessary libraries are loaded.
     */
    async function ensureLibrariesLoaded(toolId) {
        showStatus(toolId, 'Loading necessary libraries...', 'processing');
        showSpinner(toolId);
        try {
            switch (toolId) {
                case 'merge-pdf':
                case 'split-pdf':
                case 'compress-pdf':
                case 'image-to-pdf':
                case 'pdf-signer':
                    await Promise.all([
                        loadScript('pdf-lib'),
                        loadScript('filesaver')
                    ]);
                    break;
                case 'text-converter':
                    await Promise.all([
                        loadScript('pdf-lib'), // pdf-lib is needed for text-to-pdf functionality
                        loadScript('filesaver')
                    ]);
                    // Gemini API doesn't require a separate library, just fetch
                    break;
                case 'pdf-to-word':
                    await Promise.all([
                        loadScript('pdfjslib'),
                        loadScript('docx'),
                        loadScript('filesaver')
                    ]);
                    // Special handling for PDF.js worker
                    if (typeof pdfjsLib !== 'undefined' && !loadedLibraries['pdfjs_worker_set']) {
                        pdfjsLib.GlobalWorkerOptions.workerSrc = libraryUrls['pdfjs_worker'];
                        loadedLibraries['pdfjs_worker_set'] = true;
                    }
                    break;
                case 'compress-image':
                    await Promise.all([
                        loadScript('browser-image-compression'),
                        loadScript('jszip'),
                        loadScript('filesaver')
                    ]);
                    break;
                case 'qr-code':
                    await loadScript('qrcode-styling');
                    break;
            }
            showStatus(toolId, 'Libraries loaded successfully.', 'success');
        } catch (error) {
            console.error(`Error loading libraries for ${toolId}:`, error);
            showStatus(toolId, `Error loading libraries: ${error.message}. Please check your internet connection and try again.`, 'error');
            throw error; // Propagate error so toggleTool can handle it
        } finally {
            hideSpinner(toolId);
        }
    }


    function setupSignatureCanvas() {
      const signatureCanvas = document.getElementById('signature-canvas');
      // Check if canvas exists before trying to get context
      if (!signatureCanvas) return; 

      const signatureCtx = signatureCanvas.getContext('2d');
      
      // Set canvas background
      signatureCtx.fillStyle = 'rgba(255, 255, 255, 0.05)';
      signatureCtx.fillRect(0, 0, signatureCanvas.width, signatureCanvas.height);
      signatureCtx.strokeStyle = '#6c5dd3';
      signatureCtx.lineWidth = 2;
      signatureCtx.lineCap = 'round';
      signatureCtx.lineJoin = 'round';

      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;
      
      // Define functions as const to ensure proper hoisting within setupSignatureCanvas scope
      const startDrawing = (e) => {
        isDrawing = true;
        const rect = signatureCanvas.getBoundingClientRect();
        lastX = e.clientX - rect.left;
        lastY = e.clientY - rect.top;
      };
      
      const draw = (e) => {
        if (!isDrawing) return;
        
        const rect = signatureCanvas.getBoundingClientRect();
        const currentX = e.clientX - rect.left;
        const currentY = e.clientY - rect.top;
        
        signatureCtx.beginPath();
        signatureCtx.moveTo(lastX, lastY);
        signatureCtx.lineTo(currentX, currentY);
        signatureCtx.stroke();
        
        lastX = currentX;
        lastY = currentY;
      };
      
      const stopDrawing = () => {
        isDrawing = false;
      };

      // Mouse event handlers
      signatureCanvas.addEventListener('mousedown', startDrawing);
      signatureCanvas.addEventListener('mousemove', draw);
      signatureCanvas.addEventListener('mouseup', stopDrawing);
      
      // Touch event handlers for mobile
      signatureCanvas.addEventListener('touchstart', handleTouchStart);
      signatureCanvas.addEventListener('touchmove', handleTouchMove);
      signatureCanvas.addEventListener('touchend', stopDrawing);

      function handleTouchStart(e) {
        e.preventDefault();
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent('mousedown', {
          clientX: touch.clientX,
          clientY: touch.clientY
        });
        startDrawing(mouseEvent);
      }
      
      function handleTouchMove(e) {
        e.preventDefault();
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent('mousemove', {
          clientX: touch.clientX,
          clientY: touch.clientY
        });
        draw(mouseEvent);
      }

      window.clearSignature = function() { // Expose to global scope
        signatureCtx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height);
        signatureCtx.fillStyle = 'rgba(255, 255, 255, 0.05)';
        signatureCtx.fillRect(0, 0, signatureCanvas.width, signatureCanvas.height);
        signatureImage = null;
        const signPdfBtn = document.getElementById('sign-pdf-btn');
        if (signPdfBtn) signPdfBtn.disabled = true; // Disable sign button if signature is cleared
      };
      
      window.saveSignature = function() { // Expose to global scope
        // Check if there's actually a signature drawn
        const blankCanvas = document.createElement('canvas');
        blankCanvas.width = signatureCanvas.width;
        blankCanvas.height = signatureCanvas.height;
        const blankCtx = blankCanvas.getContext('2d');
        blankCtx.fillStyle = 'rgba(255, 255, 255, 0.05)';
        blankCtx.fillRect(0, 0, blankCanvas.width, blankCanvas.height);
        
        const blankData = blankCtx.getImageData(0, 0, blankCanvas.width, blankCanvas.height).data;
        const signatureData = signatureCtx.getImageData(0, 0, signatureCanvas.width, signatureCanvas.height).data;
        
        let isBlank = true;
        for (let i = 0; i < signatureData.length; i++) {
          if (signatureData[i] !== blankData[i]) {
            isBlank = false;
            break;
          }
        }
        
        if (isBlank) {
          showStatus('pdf-signer', 'Please draw a signature first', 'error');
          return;
        }
        
        signatureImage = signatureCanvas.toDataURL('image/png');
        showStatus('pdf-signer', 'Signature saved!', 'success');
        const signPdfBtn = document.getElementById('sign-pdf-btn');
        if (signPdfBtn) signPdfBtn.disabled = false;
      };

      // Signature size selector
      const signatureSizeSelect = document.getElementById('signature-size');
      if (signatureSizeSelect) {
        signatureSizeSelect.addEventListener('change', function() {
          const customSizeGroup = document.getElementById('custom-size-group');
          if (customSizeGroup) {
            if (this.value === 'custom') {
              customSizeGroup.style.display = 'block';
            } else {
              customSizeGroup.style.display = 'none';
            }
          }
        });
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      // Initialize all tool sections
      setupDragAndDrop('merge-pdf', true);
      setupDragAndDrop('split-pdf', false);
      setupDragAndDrop('compress-pdf', false);
      setupDragAndDrop('compress-image', true);
      setupDragAndDrop('image-to-pdf', true);
      setupDragAndDrop('pdf-to-word', false);
      setupDragAndDrop('pdf-signer', false);
      
      // Set up fade-in animations
      setupAnimations(); // This will observe and fade in elements as they scroll into view

      // Explicitly make tool cards visible on initial load of the home section
      const toolCards = document.querySelectorAll('#tools .tool-card.fade-in');
      toolCards.forEach(card => {
          card.classList.add('visible');
      });
      
      // Setup quality slider
      const qualitySlider = document.getElementById('image-quality');
      const qualityValue = document.getElementById('quality-value');
      if (qualitySlider && qualityValue) {
        qualitySlider.addEventListener('input', function() {
          qualityValue.textContent = this.value + '%';
        });
      }
      
      // Setup QR code live preview
      const qrInputs = ['qr-content', 'qr-size', 'qr-color', 'qr-bg-color', 'qr-dot-type', 'qr-corner-type'];
      qrInputs.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
          element.addEventListener('input', debounce(generateQRCodePreview, 500));
          element.addEventListener('change', debounce(generateQRCodePreview, 500));
        }
      });

      // Setup accordions
      document.querySelectorAll('.accordion-header').forEach(header => {
          // Add keyboard accessibility
          header.addEventListener('keydown', function(event) {
              if (event.key === 'Enter' || event.key === ' ') {
                  event.preventDefault(); // Prevent default scroll behavior for spacebar
                  this.click(); // Simulate a click
              }
          });

          header.addEventListener('click', function() {
              const targetId = this.dataset.target;
              const content = document.getElementById(targetId);
              
              const isActive = this.classList.toggle('active');
              content.classList.toggle('active');

              // Update aria-expanded attribute
              this.setAttribute('aria-expanded', isActive);

              if (isActive) {
                  content.style.maxHeight = content.scrollHeight + "px";
              } else {
                  content.style.maxHeight = "0";
              }
          });
      });
    });

    function setupDragAndDrop(toolId, allowMultiple) {
      const dropArea = document.getElementById(`${toolId}-drop-area`);
      const fileInput = document.getElementById(`${toolId}-${allowMultiple ? 'files' : 'file'}`);
      const fileList = document.getElementById(`${toolId}-file-list`);
      const actionBtn = document.getElementById(`${toolId}-btn`);

      if (!dropArea || !fileInput) {
        // console.error(`Elements not found for tool: ${toolId}. Skipping drag and drop setup.`);
        return; // Exit if elements are not found (e.g., on About/Contact page)
      }

      // Prevent default drag behaviors
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
        // Using document.body for global drag/drop to prevent default browser behavior
        document.body.addEventListener(eventName, preventDefaults, false); 
      });

      // Highlight drop area when item is dragged over it
      ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
      });

      ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
      });

      // Handle dropped files
      dropArea.addEventListener('drop', function(e) {
        const dt = e.dataTransfer;
        const files = dt.files;

        if (!allowMultiple && files.length > 1) {
          showStatus(toolId, 'Please select only one file for this tool.', 'error');
          return;
        }
        // Update the file input with the dropped files
        fileInput.files = files;
        handleFiles(files, fileList, actionBtn, allowMultiple); // Pass allowMultiple for accurate button state
      }, false);
      
      // Handle click to browse files
      dropArea.addEventListener('click', function() {
        fileInput.value = null; // Reset to allow selecting same file again
        fileInput.multiple = allowMultiple;
        fileInput.click();
      });

      // Handle file selection via input
      fileInput.addEventListener('change', function(e) {
        handleFiles(e.target.files, fileList, actionBtn, allowMultiple); // Pass allowMultiple for accurate button state
      });

      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }

      function highlight() {
        dropArea.classList.add('active');
      }

      function unhighlight() {
        dropArea.classList.remove('active');
      }
    }

    function handleFiles(files, fileListElement, actionBtn, allowMultiple) {
      if (!files || files.length === 0) {
        fileListElement.innerHTML = '';
        if (actionBtn) actionBtn.disabled = true;
        return;
      }

      // Clear previous files if single file allowed
      if (!allowMultiple) {
        fileListElement.innerHTML = '';
        if (files.length > 1) {
          showStatus(fileListElement.closest('.tool-content').id, 'Please select only one file for this tool.', 'error');
          if (actionBtn) actionBtn.disabled = true;
          return;
        }
      }
      
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        
        const fileNameSpan = document.createElement('span');
        fileNameSpan.className = 'file-item-name';
        fileNameSpan.textContent = sanitizeFilename(file.name);
        
        const fileSizeSpan = document.createElement('span');
        fileSizeSpan.className = 'file-item-size';
        fileSizeSpan.textContent = formatFileSize(file.size);
        
        const removeSpan = document.createElement('span');
        removeSpan.className = 'file-item-remove';
        removeSpan.innerHTML = '&times;';
        removeSpan.addEventListener('click', function(e) {
          e.stopPropagation();
          fileItem.remove();
          // Re-evaluate button state after removal
          if (actionBtn) {
            actionBtn.disabled = (fileListElement.children.length === 0) || (!allowMultiple && fileListElement.children.length !== 1);
          }
        });
        
        fileItem.appendChild(fileNameSpan);
        fileItem.appendChild(fileSizeSpan);
        fileItem.appendChild(removeSpan);
        
        fileListElement.appendChild(fileItem);
      }
      
      // Enable the action button if files are selected appropriately
      if (actionBtn) {
        actionBtn.disabled = (fileListElement.children.length === 0) || (!allowMultiple && fileListElement.children.length !== 1);
      }
    }

    function sanitizeFilename(filename) {
      return filename.replace(/[^\w\.\-]/g, '_');
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    async function toggleTool(toolId) {
      const toolCard = document.getElementById(`${toolId}-card`);
      const toolContent = document.getElementById(toolId);
      
      if (toolCard.classList.contains('active')) {
        toolCard.classList.remove('active');
        toolContent.style.display = 'none';
      } else {
        // Close all other tools first
        document.querySelectorAll('.tool-card.active').forEach(card => {
          card.classList.remove('active');
          card.querySelector('.tool-content').style.display = 'none';
        });
        
        // Before showing the tool, ensure its libraries are loaded
        try {
            await ensureLibrariesLoaded(toolId);
            toolCard.classList.add('active');
            toolContent.style.display = 'block';

            if (toolId === 'pdf-signer') {
                setupSignatureCanvas(); // Setup canvas when PDF Signer is active
            }
        } catch (error) {
            // Error message already shown by ensureLibrariesLoaded
            console.error(`Failed to activate tool ${toolId} due to library loading error.`);
            // Do not activate the tool if libraries fail to load
            toolCard.classList.remove('active'); 
            toolContent.style.display = 'none';
        }
      }
    }

    function setupAnimations() {
      const fadeElements = document.querySelectorAll('.fade-in');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });
      
      fadeElements.forEach(element => {
        observer.observe(element);
      });
    }

    function resetTool(toolId) {
      // Clear file inputs and lists
      const fileInput = document.getElementById(`${toolId}-${toolId.includes('merge') || toolId.includes('image-to-pdf') || toolId.includes('compress-image') ? 'files' : 'file'}`);
      const fileList = document.getElementById(`${toolId}-file-list`);
      
      if (fileInput) fileInput.value = '';
      if (fileList) fileList.innerHTML = '';
      
      // Disable action button
      const actionBtn = document.getElementById(`${toolId}-btn`);
      if (actionBtn) actionBtn.disabled = true;
      
      // Clear status messages
      const statusElement = document.getElementById(`${toolId}-status`);
      if (statusElement) {
        statusElement.textContent = '';
        statusElement.className = 'status-message';
      }
      
      // Hide spinner
      const spinner = document.getElementById(`${toolId}-spinner`);
      if (spinner) spinner.style.display = 'none';
      
      // For QR code tool, hide download button
      if (toolId === 'qr-code') {
        const downloadBtn = document.getElementById('download-qr-btn');
        const qrPreview = document.getElementById('qr-preview');
        const qrContent = document.getElementById('qr-content');
        if(downloadBtn) downloadBtn.style.display = 'none';
        if(qrPreview) qrPreview.innerHTML = '';
        if(qrContent) qrContent.value = '';
      }
      
      // For text converter, clear textarea
      if (toolId === 'text-converter') {
        const textContent = document.getElementById('text-content');
        const textFilename = document.getElementById('text-filename');
        const enhanceTextBtn = document.getElementById('enhance-text-btn');
        if(textContent) textContent.value = '';
        if(textFilename) textFilename.value = ''; // Clear filename too
        if(enhanceTextBtn) enhanceTextBtn.disabled = false; // Enable enhance button
      }
      
      // For PDF signer, clear signature
      if (toolId === 'pdf-signer') {
        // Check if clearSignature exists on window (set by setupSignatureCanvas)
        if (typeof window.clearSignature === 'function') { 
          window.clearSignature(); // Calls the global clearSignature function
        }
        const signPdfBtn = document.getElementById('sign-pdf-btn');
        if (signPdfBtn) signPdfBtn.disabled = true; // Ensures button is disabled if signature is cleared
      }

      // Close all accordions within the tool card
      const toolCard = document.getElementById(`${toolId}-card`);
      if (toolCard) {
          toolCard.querySelectorAll('.accordion-header.active').forEach(header => {
              header.classList.remove('active');
              const content = document.getElementById(header.dataset.target);
              if (content) {
                content.classList.remove('active');
                content.style.maxHeight = "0";
                header.setAttribute('aria-expanded', 'false'); // Update aria-expanded
              }
          });
      }
    }

    // PDF Processing Functions
    async function mergePDFs() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('merge-pdf-files');
      if (!fileInput.files || fileInput.files.length < 2) {
        showStatus('merge-pdf', 'Please select at least 2 PDF files to merge', 'error');
        return;
      }

      showStatus('merge-pdf', 'Merging PDFs...', 'processing');
      showSpinner('merge-pdf');
      
      try {
        const { PDFDocument } = window.PDFLib; // Access from global window object
        const mergedPdf = await PDFDocument.create();
        
        // Process each file
        for (let i = 0; i < fileInput.files.length; i++) {
          const file = fileInput.files[i];
          if (file.type !== 'application/pdf') { // Basic type check
            showStatus('merge-pdf', `Skipping non-PDF file: ${file.name}`, 'error');
            continue;
          }
          const fileBuffer = await file.arrayBuffer();
          const pdfDoc = await PDFDocument.load(fileBuffer);
          
          // Copy pages
          const pages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
          pages.forEach(page => mergedPdf.addPage(page));
        }

        if (mergedPdf.getPageCount() === 0) { // Check if any pages were actually added
          showStatus('merge-pdf', 'No valid PDF pages were merged. Please ensure your files are valid PDFs.', 'error');
          return;
        }
        
        // Save merged PDF
        const mergedPdfBytes = await mergedPdf.save();
        const blob = new Blob([mergedPdfBytes], { type: 'application/pdf' });
        
        // Download the file
        if (typeof window.saveAs === 'undefined') { // Access from global window object
          showStatus('merge-pdf', 'File saving library not loaded. Please refresh.', 'error');
          return;
        }
        window.saveAs(blob, 'merged-document.pdf');
        showStatus('merge-pdf', 'PDFs merged successfully!', 'success');
        
        // Reset tool after download
        setTimeout(() => resetTool('merge-pdf'), 2000);
      } catch (error) {
        console.error('Error merging PDFs:', error);
        showStatus('merge-pdf', 'Error merging PDFs: ' + error.message, 'error');
      } finally {
        hideSpinner('merge-pdf');
      }
    }

    async function splitPDF() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('split-pdf-file');
      const pagesInput = document.getElementById('split-pages');
      
      if (!fileInput.files || fileInput.files.length === 0) {
        showStatus('split-pdf', 'Please select a PDF file to split', 'error');
        return;
      }
      
      if (!pagesInput.value.trim()) {
        showStatus('split-pdf', 'Please specify pages to extract', 'error');
        return;
      }

      showStatus('split-pdf', 'Splitting PDF...', 'processing');
      showSpinner('split-pdf');
      
      try {
        const { PDFDocument } = window.PDFLib; // Access from global window object
        const file = fileInput.files[0];
        const fileBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(fileBuffer);
        
        // Parse page ranges
        const pageRanges = parsePageRanges(pagesInput.value, pdfDoc.getPageCount());
        if (pageRanges.length === 0) {
          showStatus('split-pdf', 'Invalid page range specified or no pages found in range. Max pages: ' + pdfDoc.getPageCount(), 'error');
          hideSpinner('split-pdf'); // Ensure spinner hides on early exit
          return;
        }
        
        // Create new PDF with selected pages
        const newPdf = await PDFDocument.create();
        for (const pageNum of pageRanges) {
          // Ensure pageNum is within valid bounds after parsing
          if (pageNum > 0 && pageNum <= pdfDoc.getPageCount()) {
            const [copiedPage] = await newPdf.copyPages(pdfDoc, [pageNum - 1]);
            newPdf.addPage(copiedPage);
          } else {
            console.warn(`Skipping invalid page number: ${pageNum}`);
          }
        }

        if (newPdf.getPageCount() === 0) { // Check if any pages were actually copied
          showStatus('split-pdf', 'No pages extracted. Check your page range.', 'error');
          return;
        }
        
        // Save split PDF
        const splitPdfBytes = await newPdf.save();
        const blob = new Blob([splitPdfBytes], { type: 'application/pdf' });
        
        // Download the file
        if (typeof window.saveAs === 'undefined') { // Access from global window object
          showStatus('split-pdf', 'File saving library not loaded. Please refresh.', 'error');
          return;
        }
        window.saveAs(blob, 'split-document.pdf');
        showStatus('split-pdf', 'PDF split successfully!', 'success');
        
        // Reset tool after download
        setTimeout(() => resetTool('split-pdf'), 2000);
      } catch (error) {
        console.error('Error splitting PDF:', error);
        showStatus('split-pdf', 'Error splitting PDF: ' + error.message, 'error');
      } finally {
        hideSpinner('split-pdf');
      }
    }

    function parsePageRanges(rangeStr, maxPages) {
      const ranges = rangeStr.split(',');
      const pages = new Set();
      
      for (const range of ranges) {
        const trimmedRange = range.trim();
        if (trimmedRange.includes('-')) {
          const parts = trimmedRange.split('-').map(Number);
          let start = parts[0];
          let end = parts[1];

          // Handle cases like "5-" or "-10" by assuming boundaries
          if (isNaN(start) && isNaN(end)) continue; // Both invalid
          if (isNaN(start)) start = 1;
          if (isNaN(end)) end = maxPages;
          
          const validStart = Math.max(1, Math.min(start, maxPages));
          const validEnd = Math.max(1, Math.min(end, maxPages));
          
          for (let i = validStart; i <= validEnd; i++) {
            pages.add(i);
          }
        } else if (trimmedRange) {
          const page = Number(trimmedRange);
          if (page >= 1 && page <= maxPages) {
            pages.add(page);
          }
        }
      }
      
      return Array.from(pages).sort((a, b) => a - b);
    }

    async function compressPDF() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('compress-pdf-file');
      const compressionLevel = document.getElementById('compression-level').value;
      const compressionMode = document.getElementById('compression-mode').value; // Currently unused, but kept for future expansion
      
      if (!fileInput.files || fileInput.files.length === 0) {
        showStatus('compress-pdf', 'Please select a PDF file to compress', 'error');
        return;
      }

      showStatus('compress-pdf', 'Compressing PDF...', 'processing');
      showSpinner('compress-pdf');
      
      try {
        const { PDFDocument } = window.PDFLib; // Access from global window object
        const file = fileInput.files[0];
        const fileBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(fileBuffer);
        
        // Enhanced compression options based on level and mode
        const options = {
          useObjectStreams: true,
          addDefaultPage: false,
          objectsPerTick: 50,
          updateFieldAppearances: false,
        };
        
        // Adjust options based on compression level (simulated best effort with PDF-lib)
        if (compressionLevel === 'low') {
          options.useObjectStreams = false;
        } else if (compressionLevel === 'high') {
          options.useObjectStreams = true;
          options.objectsPerTick = 100;
        } else if (compressionLevel === 'extreme') {
          options.useObjectStreams = true;
          options.objectsPerTick = 200;
        }
        
        // Save compressed PDF
        const compressedPdfBytes = await pdfDoc.save(options);
        const blob = new Blob([compressedPdfBytes], { type: 'application/pdf' });
        
        // Calculate compression ratio
        const originalSize = file.size;
        const compressedSize = blob.size;
        const ratio = ((originalSize - compressedSize) / originalSize * 100).toFixed(2);
        
        // Download the file
        if (typeof window.saveAs === 'undefined') { // Access from global window object
          showStatus('compress-pdf', 'File saving library not loaded. Please refresh.', 'error');
          return;
        }
        window.saveAs(blob, 'compressed-document.pdf');
        showStatus('compress-pdf', `PDF compressed successfully! Size reduced by ${ratio}%`, 'success');
        
        // Reset tool after download
        setTimeout(() => resetTool('compress-pdf'), 2000);
      } catch (error) {
        console.error('Error compressing PDF:', error);
        showStatus('compress-pdf', 'Error compressing PDF: ' + error.message, 'error');
      } finally {
        hideSpinner('compress-pdf');
      }
    }

    async function convertImagesToPDF() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('image-to-pdf-files');
      const layout = document.getElementById('pdf-layout').value;
      const margin = parseInt(document.getElementById('pdf-margin').value);
      
      if (!fileInput.files || fileInput.files.length === 0) {
        showStatus('image-to-pdf', 'Please select at least one image to convert', 'error');
        return;
      }

      showStatus('image-to-pdf', 'Converting images to PDF...', 'processing');
      showSpinner('image-to-pdf');
      
      try {
        const { PDFDocument } = window.PDFLib; // Access from global window object
        const pdfDoc = await PDFDocument.create();
        
        // Process each image
        for (let i = 0; i < fileInput.files.length; i++) {
          const file = fileInput.files[i];
          if (!file.type.match('image.*')) {
            console.warn(`Skipping non-image file: ${file.name}`);
            continue;
          }
          
          const imageBytes = await file.arrayBuffer();
          let image;
          let embeddedImageSuccess = false;

          try {
            if (file.type === 'image/jpeg' || file.type === 'image/jpg') {
              image = await pdfDoc.embedJpg(imageBytes);
              embeddedImageSuccess = true;
            } else if (file.type === 'image/png') {
              image = await pdfDoc.embedPng(imageBytes);
              embeddedImageSuccess = true;
            } else {
              // For other image types, convert to JPEG first
              showStatus('image-to-pdf', `Converting ${file.name} to JPEG for PDF embedding...`, 'processing');
              const convertedImageBlob = await convertImageToJpeg(file);
              if (convertedImageBlob) {
                image = await pdfDoc.embedJpg(await convertedImageBlob.arrayBuffer());
                embeddedImageSuccess = true;
              } else {
                showStatus('image-to-pdf', `Failed to convert ${file.name} to JPEG. Skipping.`, 'error');
              }
            }
            
            if (!embeddedImageSuccess) continue; // Skip if embedding failed

            // Determine page size based on layout and image dimensions
            let pageWidth, pageHeight;
            const marginPoints = margin * 2.83465; // Convert mm to points (1mm = 2.83465pt)
            
            // Calculate content area dimensions
            const contentWidth = image.width;
            const contentHeight = image.height;

            if (layout === 'auto') {
              pageWidth = contentWidth + (marginPoints * 2);
              pageHeight = contentHeight + (marginPoints * 2);
            } else if (layout === 'landscape') {
                // Ensure page is wider than it is tall
                if (contentWidth > contentHeight) {
                    pageWidth = contentWidth + (marginPoints * 2);
                    pageHeight = contentHeight + (marginPoints * 2);
                } else {
                    pageWidth = contentHeight + (marginPoints * 2); // Swap dimensions for landscape orientation
                    pageHeight = contentWidth + (marginPoints * 2);
                }
            } else { // portrait
                // Ensure page is taller than it is wide
                if (contentHeight > contentWidth) {
                    pageWidth = contentWidth + (marginPoints * 2);
                    pageHeight = contentHeight + (marginPoints * 2);
                } else {
                    pageWidth = contentHeight + (marginPoints * 2); // Swap dimensions for portrait orientation
                    pageHeight = contentWidth + (marginPoints * 2);
                }
            }
            
            // Add a new page with the calculated dimensions
            const page = pdfDoc.addPage([pageWidth, pageHeight]);
            
            // Draw the image centered on the page with margins
            const scale = Math.min(
              (pageWidth - marginPoints * 2) / image.width,
              (pageHeight - marginPoints * 2) / image.height
            );
            
            const scaledWidth = image.width * scale;
            const scaledHeight = image.height * scale;
            
            page.drawImage(image, {
              x: (pageWidth - scaledWidth) / 2,
              y: (pageHeight - scaledHeight) / 2,
              width: scaledWidth,
              height: scaledHeight,
            });
          } catch (error) {
            console.error(`Error processing image ${file.name}:`, error);
            showStatus('image-to-pdf', `Error processing ${file.name}: ${error.message}. Skipping.`, 'error');
            continue; // Skip to next file if an error occurs
          }
        }
        
        if (pdfDoc.getPageCount() === 0) {
          showStatus('image-to-pdf', 'No valid images were processed or added to PDF.', 'error');
          return;
        }
        
        // Save the PDF
        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        
        // Download the file
        if (typeof window.saveAs === 'undefined') { // Access from global window object
          showStatus('image-to-pdf', 'File saving library not loaded. Please refresh.', 'error');
          return;
        }
        window.saveAs(blob, 'converted-images.pdf');
        showStatus('image-to-pdf', 'Images converted to PDF successfully!', 'success');
        
        // Reset tool after download
        setTimeout(() => resetTool('image-to-pdf'), 2000);
      } catch (error) {
        console.error('Error converting images to PDF:', error);
        showStatus('image-to-pdf', 'Error: ' + error.message, 'error');
      } finally {
        hideSpinner('image-to-pdf');
      }
    }

    async function convertImageToJpeg(file) {
      return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = function(event) {
          const img = new Image();
          img.onload = function() {
            const canvas = document.createElement('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            
            canvas.toBlob((blob) => {
              // Ensure the blob is not null before resolving
              if (blob) {
                resolve(new File([blob], file.name.replace(/\.[^/.]+$/, '.jpg'), { type: 'image/jpeg' }));
              } else {
                resolve(null); // Resolve with null if blob creation failed
              }
            }, 'image/jpeg', 0.9);
          };
          img.onerror = () => { // Handle image loading errors
            console.error(`Failed to load image: ${file.name}`);
            resolve(null);
          };
          img.src = event.target.result;
        };
        reader.onerror = () => { // Handle file reading errors
          console.error(`Failed to read file: ${file.name}`);
          resolve(null);
        };
        reader.readAsDataURL(file);
      });
    }

    async function convertTextToPDF() {
        // Library check is now handled by ensureLibrariesLoaded
        const textContent = document.getElementById('text-content').value;
        const filename = document.getElementById('text-filename').value || 'document';
        
        if (!textContent.trim()) {
            showStatus('text-converter', 'Please enter some text to convert', 'error');
            return;
        }

        showStatus('text-converter', 'Converting text to PDF...', 'processing');
        showSpinner('text-converter');
        
        try {
            const { PDFDocument, rgb, StandardFonts } = window.PDFLib; // Access from global window object
            const pdfDoc = await PDFDocument.create();
            
            // Embed a standard font. Helvetica is generally good, but ensure proper handling of newlines.
            const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica);
            
            const fontSize = 12;
            const lineHeight = fontSize * 1.2;
            const textMargin = 50;
            
            // Replace common newline characters with '\n' (which pdf-lib can then break if specified)
            // or specifically '\r' which is often handled as a line break by PDF viewers.
            // The original error "WinAnsi cannot encode " " (0x000a)" specifically refers to line feed (LF)
            // characters (0x000A). Let's explicitly replace them to ensure proper encoding and layout.
            let normalizedText = textContent.replace(/\r\n|\r/g, '\n'); // Normalize all newlines to LF
            
            // To prevent the WinAnsi encoding error, we need to manually break lines
            // and draw them one by one, ensuring no problematic characters pass directly to drawText
            // without proper context. Alternatively, use a font that natively supports more Unicode.
            // However, with standard fonts, manual line breaking is safer for complex text.

            const pages = [];
            let currentPage = pdfDoc.addPage();
            pages.push(currentPage);

            let yPosition = currentPage.getHeight() - textMargin;
            
            // Splitting the text by lines and then by words to fit within page width
            const rawLines = normalizedText.split('\n');
            for (const rawLine of rawLines) {
                let currentLineBuffer = '';
                const words = rawLine.split(' ');
                
                for (const word of words) {
                    const testLine = currentLineBuffer === '' ? word : `${currentLineBuffer} ${word}`;
                    const textWidth = helveticaFont.widthOfTextAtSize(testLine, fontSize);
                    const availableWidth = currentPage.getWidth() - (2 * textMargin);

                    if (textWidth > availableWidth && currentLineBuffer !== '') {
                        // Draw the buffered line
                        if (yPosition < textMargin) {
                            currentPage = pdfDoc.addPage();
                            pages.push(currentPage);
                            yPosition = currentPage.getHeight() - textMargin;
                        }
                        currentPage.drawText(currentLineBuffer, {
                            x: textMargin,
                            y: yPosition,
                            size: fontSize,
                            font: helveticaFont,
                            color: rgb(0, 0, 0),
                        });
                        yPosition -= lineHeight;
                        currentLineBuffer = word; // Start new buffer with current word
                    } else {
                        currentLineBuffer = testLine;
                    }
                }
                // Draw any remaining text in the buffer for the current line
                if (currentLineBuffer.length > 0) {
                    if (yPosition < textMargin) {
                        currentPage = pdfDoc.addPage();
                        pages.push(currentPage);
                        yPosition = currentPage.getHeight() - textMargin;
                    }
                    currentPage.drawText(currentLineBuffer, {
                        x: textMargin,
                        y: yPosition,
                        size: fontSize,
                        font: helveticaFont,
                        color: rgb(0, 0, 0),
                    });
                    yPosition -= lineHeight;
                }
            }

            // If no text was drawn (e.g., input was just spaces/newlines), ensure at least one page exists
            if (pdfDoc.getPageCount() === 0) {
              pdfDoc.addPage();
            }
            
            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            if (typeof window.saveAs === 'undefined') { // Access from global window object
              showStatus('text-converter', 'File saving library not loaded. Please refresh.', 'error');
              return;
            }
            window.saveAs(blob, `${filename}.pdf`);
            showStatus('text-converter', 'PDF created successfully!', 'success');
        } catch (error) {
            console.error('Error converting text to PDF:', error);
            showStatus('text-converter', 'Error: ' + error.message + '. Ensure text contains only supported characters.', 'error');
        } finally {
            hideSpinner('text-converter');
        }
    }


    async function convertPDFToWord() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('pdf-to-word-file');
      const format = document.getElementById('word-format').value;
      
      if (!fileInput.files || fileInput.files.length === 0) {
        showStatus('pdf-to-word', 'Please select a PDF file to convert', 'error');
        return;
      }

      showStatus('pdf-to-word', 'Extracting text from PDF...', 'processing');
      showSpinner('pdf-to-word');
      
      try {
        const file = fileInput.files[0];
        const fileReader = new FileReader();

        const fullTextPromise = new Promise((resolve, reject) => {
          fileReader.onload = async function() {
            try {
              const pdf = await window.pdfjsLib.getDocument({ data: new Uint8Array(fileReader.result) }).promise; // Access from global window object
              let extracted = '';
              for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const textContent = await page.getTextContent();
                extracted += textContent.items.map(item => item.str).join(' ') + '\n\n';
              }
              resolve(extracted);
            } catch (error) {
              reject(error);
            }
          };
          fileReader.onerror = (error) => reject(error);
          fileReader.readAsArrayBuffer(file);
        });

        const fullText = await fullTextPromise;

        // Create a Word document
        const { Document, Paragraph, TextRun, Packer } = window.docx; // Access from global window object
        
        const doc = new Document({
          sections: [{
            properties: {},
            children: [
              new Paragraph({
                children: [
                  new TextRun({
                    text: fullText,
                    size: 24 // Font size 12pt (24 half-points)
                  })
                ]
              })
            ]
          }]
        });
        
        let mimeType, extension;
        if (format === 'rtf') {
          mimeType = 'application/rtf';
          extension = 'rtf';
          // Basic RTF conversion: will lose all formatting, images, etc.
          const rtfContent = `{\\rtf1\\ansi\\ansicpg1252\\deff0\\deflang1033{\\fonttbl{\\f0\\fnil\\fcharset0 Calibri;}}\\viewkind4\\uc1\\pard\\f0\\fs24 ${fullText.replace(/\n/g, '\\par ')}\\par}`;
          const blob = new Blob([rtfContent], { type: mimeType });
          if (typeof window.saveAs === 'undefined') { // Access from global window object
            showStatus('pdf-to-word', 'File saving library not loaded. Please refresh.', 'error');
            return;
          }
          window.saveAs(blob, `converted-document.${extension}`);
        } else { // docx
          mimeType = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
          extension = 'docx';
          const blob = await Packer.toBlob(doc);
          if (typeof window.saveAs === 'undefined') { // Access from global window object
            showStatus('pdf-to-word', 'File saving library not loaded. Please refresh.', 'error');
            return;
          }
          window.saveAs(blob, `converted-document.${extension}`);
        }
        
        showStatus('pdf-to-word', 'PDF converted to Word successfully (text only)!', 'success');
        
        setTimeout(() => resetTool('pdf-to-word'), 2000);
      } catch (error) {
        console.error('Error converting PDF to Word:', error);
        showStatus('pdf-to-word', 'Error converting PDF to Word: ' + error.message + '. Complex PDF layouts may lose formatting.', 'error');
      } finally {
        hideSpinner('pdf-to-word');
      }
    }


    async function signPDF() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('pdf-signer-file');
      const pageNum = parseInt(document.getElementById('signature-page').value) || 1;
      const position = document.getElementById('signature-position').value;
      const sizeOption = document.getElementById('signature-size').value;
      const customWidth = parseInt(document.getElementById('custom-width').value) || 150;
      
      if (!fileInput.files || fileInput.files.length === 0) {
        showStatus('pdf-signer', 'Please select a PDF file to sign', 'error');
        return;
      }
      
      if (!signatureImage) {
        showStatus('pdf-signer', 'Please create and save your signature first', 'error');
        return;
      }

      showStatus('pdf-signer', 'Signing PDF...', 'processing');
      showSpinner('pdf-signer');
      
      try {
        const { PDFDocument } = window.PDFLib; // Access from global window object
        const file = fileInput.files[0];
        const fileBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(fileBuffer);
        
        // Convert signature image to PDF image
        const signatureImg = await pdfDoc.embedPng(signatureImage);
        
        // Get the page to sign (0-based index)
        const pageCount = pdfDoc.getPageCount();
        const pageIndex = Math.min(Math.max(0, pageNum - 1), pageCount - 1); // Ensure index is within bounds

        if (pageCount === 0) {
          showStatus('pdf-signer', 'The selected PDF has no pages to sign.', 'error');
          return;
        }

        const page = pdfDoc.getPage(pageIndex);
        
        // Calculate signature dimensions
        const { width, height } = page.getSize();
        let sigWidth;
        
        // Determine signature size based on selection
        switch(sizeOption) {
          case 'small':
            sigWidth = 100;
            break;
          case 'large':
            sigWidth = 200;
            break;
          case 'custom':
            sigWidth = customWidth;
            break;
          default: // medium
            sigWidth = 150;
        }
        
        const sigHeight = (signatureImg.height / signatureImg.width) * sigWidth;
        
        // Calculate signature position
        let x, y;
        const padding = 20;
        
        switch(position) {
          case 'bottom-left':
            x = padding;
            y = padding;
            break;
          case 'top-right':
            x = width - sigWidth - padding;
            y = height - sigHeight - padding;
            break;
          case 'top-left':
            x = padding;
            y = height - sigHeight - padding;
            break;
          case 'center':
            x = (width - sigWidth) / 2;
            y = (height - sigHeight) / 2;
            break;
          default: // bottom-right
            x = width - sigWidth - padding;
            y = padding;
        }
        
        // Draw the signature
        page.drawImage(signatureImg, {
          x,
          y,
          width: sigWidth,
          height: sigHeight,
        });
        
        // Save signed PDF
        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        
        // Download the file
        if (typeof window.saveAs === 'undefined') { // Access from global window object
          showStatus('pdf-signer', 'File saving library not loaded. Please refresh.', 'error');
          return;
        }
        window.saveAs(blob, 'signed-document.pdf');
        showStatus('pdf-signer', 'PDF signed successfully!', 'success');
        
        setTimeout(() => resetTool('pdf-signer'), 2000);
      } catch (error) {
        console.error('Error signing PDF:', error);
        showStatus('pdf-signer', 'Error: ' + error.message, 'error');
      } finally {
        hideSpinner('pdf-signer');
      }
    }

    // Enhanced image compression using browser-image-compression
    async function compressImages() {
      // Library check is now handled by ensureLibrariesLoaded
      const fileInput = document.getElementById('compress-image-files');
      const quality = document.getElementById('image-quality').value / 100;
      const maxWidth = document.getElementById('image-resize').value;
      const outputFormat = document.getElementById('output-format').value;
      const compressionMode = document.getElementById('advanced-compression').value;
      
      if (!fileInput.files || fileInput.files.length === 0) {
        showStatus('compress-image', 'Please select at least one image to compress', 'error');
        return;
      }

      showStatus('compress-image', 'Compressing images...', 'processing');
      showSpinner('compress-image');
      
      try {
        const zip = new window.JSZip(); // Access from global window object
        let imgCount = 0;
        let compressedImgCount = 0;
        let totalOriginalSize = 0;
        let totalCompressedSize = 0;
        let failedCompressions = [];

        // Enhanced compression options based on mode
        const baseOptions = {
          maxSizeMB: 1, // Target size in MB for each image
          maxWidthOrHeight: maxWidth ? parseInt(maxWidth) : undefined,
          useWebWorker: true,
          initialQuality: quality,
          maxIteration: 10,
          preserveExif: true // Keep EXIF data
        };

        // Adjust options based on compression mode
        let options;
        if (compressionMode === 'aggressive') {
          options = {
            ...baseOptions,
            maxIteration: 15, // More iterations for smaller size
            quality: Math.max(0.1, quality * 0.8), // More aggressive quality reduction
            fileType: outputFormat === 'original' ? undefined : `image/${outputFormat}` // Correct MIME type
          };
        } else if (compressionMode === 'conservative') {
          options = {
            ...baseOptions,
            maxIteration: 5, // Fewer iterations for better quality
            quality: Math.min(1, quality * 1.1), // Slightly better quality
            fileType: outputFormat === 'original' ? undefined : `image/${outputFormat}` // Correct MIME type
          };
        } else {
          // Balanced mode
          options = {
            ...baseOptions,
            quality: quality,
            fileType: outputFormat === 'original' ? undefined : `image/${outputFormat}` // Correct MIME type
          };
        }

        // Process each image with enhanced compression
        for (let i = 0; i < fileInput.files.length; i++) {
          const file = fileInput.files[i];
          if (!file.type.match('image.*')) {
            console.warn(`Skipping non-image file: ${file.name}`);
            failedCompressions.push(`${file.name} (not an image)`);
            continue;
          }

          totalOriginalSize += file.size;

          try {
            const compressedFile = await window.browserImageCompression(file, options); // Access from global window object
            totalCompressedSize += compressedFile.size;
            compressedImgCount++;
            
            // Generate filename with appropriate extension
            let filename = file.name;
            if (outputFormat !== 'original') {
              const nameWithoutExt = file.name.replace(/\.[^/.]+$/, '');
              const ext = outputFormat === 'jpeg' ? 'jpg' : outputFormat;
              filename = `${nameWithoutExt}.${ext}`;
            }
            
            zip.file(`compressed_${filename}`, compressedFile);
            imgCount++;
          } catch (error) {
            console.error(`Error compressing ${file.name}:`, error);
            // Fallback to original file if compression fails
            zip.file(`original_${file.name}`, file);
            imgCount++;
            failedCompressions.push(`${file.name} (${error.message})`);
          }
        }

        if (imgCount === 0) {
          showStatus('compress-image', 'No valid images found for compression.', 'error');
          return;
        }

        // Generate ZIP with better compression
        const zipContent = await zip.generateAsync({
          type: 'blob',
          compression: 'DEFLATE',
          compressionOptions: { level: 6 }
        });

        if (typeof window.saveAs === 'undefined') { // Access from global window object
          showStatus('compress-image', 'File saving library not loaded. Please refresh.', 'error');
          return;
        }
        window.saveAs(zipContent, 'compressed_images.zip');
        
        // Calculate overall compression ratio
        let compressionMessage = '';
        if (totalOriginalSize > 0) {
          const compressionRatio = ((totalOriginalSize - totalCompressedSize) / totalOriginalSize * 100).toFixed(1);
          compressionMessage = `Overall size reduced by ${compressionRatio}%`;
        }
        
        if (failedCompressions.length === 0) {
          showStatus('compress-image', `${imgCount} images compressed successfully! ${compressionMessage}`, 'success');
        } else {
          showStatus('compress-image', `Finished processing ${imgCount} images. Some failed: ${failedCompressions.join(', ')}. ${compressionMessage}`, 'success');
        }
        
        setTimeout(() => resetTool('compress-image'), 2000);
      } catch (error) {
        console.error('Error compressing images:', error);
        showStatus('compress-image', 'Error: ' + error.message, 'error');
      } finally {
        hideSpinner('compress-image');
      }
    }

    // Enhanced QR Code generation with styling
    function generateQRCode() {
      // Library check is now handled by ensureLibrariesLoaded
      const content = document.getElementById('qr-content').value;
      const size = parseInt(document.getElementById('qr-size').value);
      const color = document.getElementById('qr-color').value;
      const bgColor = document.getElementById('qr-bg-color').value;
      const dotType = document.getElementById('qr-dot-type').value;
      const cornerType = document.getElementById('qr-corner-type').value;
      
      if (!content) {
        showStatus('qr-code', 'Please enter content for the QR code', 'error');
        // Clear previous QR code if content is empty
        document.getElementById('qr-preview').innerHTML = '';
        document.getElementById('download-qr-btn').style.display = 'none';
        return;
      }
      
      const preview = document.getElementById('qr-preview');
      preview.innerHTML = '';
      
      // Create QR code with advanced styling
      const qrCode = new window.QRCodeStyling({ // Access from global window object
        width: size,
        height: size,
        type: "canvas",
        data: content,
        dotsOptions: {
          color: color,
          type: dotType
        },
        cornersSquareOptions: {
          color: color,
          type: cornerType
        },
        cornersDotOptions: {
          color: color,
          type: "dot"
        },
        backgroundOptions: {
          color: bgColor,
        }
      });
      
      qrCode.append(preview);
      
      // Store QR code instance for download
      window.currentQRCode = qrCode;
      
      document.getElementById('download-qr-btn').style.display = 'block';
      showStatus('qr-code', 'QR code generated successfully!', 'success');
    }

    function generateQRCodePreview() {
      const content = document.getElementById('qr-content').value;
      // Only generate if there's content to avoid errors or empty previews
      if (content.trim()) {
        generateQRCode();
      } else {
        document.getElementById('qr-preview').innerHTML = ''; // Clear preview if no content
        document.getElementById('download-qr-btn').style.display = 'none'; // Hide download button
        showStatus('qr-code', '', ''); // Clear status
      }
    }

    function downloadQRCode() {
      if (window.currentQRCode) {
        window.currentQRCode.download({ name: "qrcode", extension: "png" });
        
        // Reset tool after download
        setTimeout(() => resetTool('qr-code'), 2000); // resetTool now handles clearing status
      }
    }

    // Helper functions
    function showStatus(toolId, message, type) {
      const statusElement = document.getElementById(`${toolId}-status`);
      if (!statusElement) return;
      
      statusElement.textContent = message;
      statusElement.className = 'status-message';
      
      if (type === 'processing') {
        statusElement.classList.add('processing');
      } else if (type) {
        statusElement.classList.add(type);
      }
    }

    function showSpinner(toolId) {
      const spinner = document.getElementById(`${toolId}-spinner`);
      if (spinner) spinner.style.display = 'block';
    }

    function hideSpinner(toolId) {
      const spinner = document.getElementById(`${toolId}-spinner`);
      if (spinner) spinner.style.display = 'none';
    }

    // Debounce function for live preview
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Gemini API integration for text enhancement
    async function enhanceTextContent() {
        const textContentElement = document.getElementById('text-content');
        let textToEnhance = textContentElement.value;

        if (!textToEnhance.trim()) {
            showStatus('text-converter', 'Please enter some text to enhance.', 'error');
            return;
        }

        const enhanceTextBtn = document.getElementById('enhance-text-btn');
        if (enhanceTextBtn) enhanceTextBtn.disabled = true; // Disable button immediately

        showStatus('text-converter', 'Enhancing text with Gemini API...', 'processing');
        showSpinner('text-converter');

        // IMPORTANT: Replace "YOUR_GEMINI_API_KEY" with your actual Gemini API Key
        // Get your API key from Google AI Studio: https://aistudio.google.com/
        const apiKey = "YOUR_GEMINI_API_KEY"; 
        
        if (apiKey === "YOUR_GEMINI_API_KEY" || !apiKey) {
            showStatus('text-converter', 'Gemini API key is missing. Please replace "YOUR_GEMINI_API_KEY" in the code with your actual key.', 'error');
            hideSpinner('text-converter');
            if (enhanceTextBtn) enhanceTextBtn.disabled = false;
            return;
        }

        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = { contents: chatHistory };

        let retries = 0;
        const maxRetries = 3;
        const baseDelay = 1000; // 1 second

        try {
            while (retries < maxRetries) {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429 && retries < maxRetries - 1) {
                        const delay = baseDelay * Math.pow(2, retries);
                        showStatus('text-converter', `Rate limit hit. Retrying in ${delay / 1000} seconds...`, 'processing');
                        await new Promise(resolve => setTimeout(resolve, delay));
                        retries++;
                        continue; // Retry
                    } else {
                        throw new Error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                    }
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const enhancedText = result.candidates[0].content.parts[0].text;
                    textContentElement.value = enhancedText; // Update the textarea with enhanced text
                    showStatus('text-converter', 'Text enhanced successfully!', 'success');
                    break; // Success, exit loop
                } else {
                    throw new Error('Gemini API response structure unexpected or content missing.');
                }
            }
            if (retries === maxRetries) {
                showStatus('text-converter', 'Failed to enhance text after multiple retries. Please try again later.', 'error');
            }
        } catch (error) {
            console.error('Error calling Gemini API for enhancement:', error);
            showStatus('text-converter', 'Error enhancing text: ' + error.message, 'error');
        } finally {
            hideSpinner('text-converter');
            if (enhanceTextBtn) enhanceTextBtn.disabled = false; // Re-enable button
        }
    }
  </script>
</body>
</html>