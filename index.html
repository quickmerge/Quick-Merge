<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quick Merge – Free & Secure Online File Tools</title>
  <meta name="description" content="Quick Merge offers a complete suite of free, secure, and private file processing tools. Merge, split, compress PDFs, convert images, and more—all processed locally in your browser.">
  <meta name="keywords" content="PDF merge, PDF split, compress PDF, image to PDF, QR code generator, file converter, online tools, privacy-focused tools, secure file processing, free pdf tools, unlock PDF, HEIC to JPEG">
  <meta name="author" content="Quick Merge">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Quick Merge - Secure, Browser-Based File Processing Tools">
  <meta property="og:description" content="Merge, compress, and convert files instantly with our privacy-focused browser tools. Your files are never uploaded to a server.">
  <meta property="og:type" content="website">
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4141481490330428"
     crossorigin="anonymous"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #0f0f10, #111215);
      color: #f0f0f0;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    main { flex: 1; }
    a { text-decoration: none; color: inherit; }
    .container { max-width: 1200px; margin: auto; padding: 2rem; }
    header {
      background: rgba(15, 15, 16, 0.95);
      position: sticky; top: 0; z-index: 1000;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .nav {
      display: flex; justify-content: space-between; align-items: center;
      max-width: 1200px; margin: auto; padding: 1rem 2rem;
    }
    .nav h1 a {
      font-size: 1.5rem; font-weight: 700;
      background: linear-gradient(90deg, #00f6ff, #6c5dd3);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .nav .nav-links { display: flex; gap: 1.5rem; }
    .nav .nav-links a {
      font-size: 1rem; color: #ccc; transition: color 0.2s;
      padding-bottom: 4px; border-bottom: 2px solid transparent;
    }
    .nav .nav-links a:hover,
    .nav .nav-links a.active-link { color: #fff; border-bottom-color: #6c5dd3; }
    .mobile-menu-btn { display: none; background: none; border: none; color: #ccc; font-size: 1.5rem; cursor: pointer; }
    .mobile-menu {
      display: none; position: fixed; top: 70px; left: 0; right: 0;
      background: rgba(15, 15, 16, 0.98); padding: 1rem; z-index: 999;
      transform: translateY(-120%); transition: transform 0.3s ease-in-out;
    }
    .mobile-menu.active { display: block; transform: translateY(0); }
    .mobile-menu a { display: block; padding: 0.8rem 1rem; color: #ccc; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .mobile-menu a:hover { color: #fff; background: rgba(108, 93, 211, 0.1); }
    .hero { text-align: center; padding: 5rem 2rem 3rem; }
    .hero h2 { font-size: 2.8rem; background: linear-gradient(90deg, #00f6ff, #6c5dd3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .hero p { color: #aaa; margin-top: 1rem; font-size: 1.2rem; }
    .cta { margin-top: 2rem; }
    .cta button {
      background: #6c5dd3; color: white; padding: 0.8rem 1.6rem;
      border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: 0.3s ease;
    }
    .cta button:hover { background: #5842c3; }
    .tools {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 2rem; margin-top: 4rem;
    }
    .tool-card {
      background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(14px);
      border-radius: 14px; padding: 2rem; border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 0 20px rgba(108, 93, 211, 0.08);
      transition: all 0.3s ease;
      display: flex; flex-direction: column;
    }
    .tool-card:hover { transform: translateY(-6px); box-shadow: 0 0 28px rgba(108, 93, 211, 0.25); }
    .tool-card h3 { font-size: 1.3rem; color: #fff; margin-bottom: 0.5rem; }
    .tool-card > p { color: #bbb; font-size: 0.95rem; flex-grow: 1; min-height: 40px; }
    .tool-btn {
      background: #6c5dd3; color: white; padding: 0.6rem 1.2rem;
      border: none; border-radius: 6px; font-size: 0.9rem; cursor: pointer;
      transition: 0.3s ease; margin-top: 1rem; width: 100%;
    }
    .tool-btn:hover { background: #5842c3; }
    .tool-btn.secondary { background: transparent; border: 1px solid #6c5dd3; margin-top: 0.5rem; }
    .tool-btn:disabled { background: #555; cursor: not-allowed; opacity: 0.7; }
    .tool-content {
      display: none;
      margin-top: 1rem;
      border-top: 1px solid rgba(255,255,255,0.1);
      padding-top: 1.5rem;
    }
    .tool-card.active .tool-content { display: block; }
    .file-input { width: 100%; margin-bottom: 1rem; }
    .file-input label { display: block; margin-bottom: 0.5rem; color: #ddd; font-size: 0.9rem; }
    .file-input input[type="file"] { display: none; }
    .drag-drop-area {
      width: 100%; padding: 2rem; border: 2px dashed rgba(255,255,255,0.3);
      border-radius: 8px; text-align: center; cursor: pointer;
      transition: all 0.3s; margin-bottom: 1rem;
    }
    .drag-drop-area:hover, .drag-drop-area.active {
      border-color: #6c5dd3; background: rgba(108, 93, 211, 0.1);
    }
    .drag-drop-area p { margin-bottom: 0.5rem; }
    .drag-drop-area .small { font-size: 0.8rem; color: #aaa; }
    .file-list { margin-top: 1rem; max-height: 150px; overflow-y: auto; }
    .file-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: 0.5rem; background: rgba(255,255,255,0.05);
      border-radius: 4px; margin-bottom: 0.3rem;
    }
    .file-item-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 70%; }
    .file-item-size { font-size: 0.8rem; color: #aaa; }
    .options { margin: 1rem 0; }
    .option-group { margin-bottom: 1rem; }
    .option-group label { display: block; margin-bottom: 0.3rem; color: #ddd; font-size: 0.9rem; }
    .option-group input, .option-group select, .option-group textarea {
      width: 100%; padding: 0.5rem; background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: #fff;
    }
    .compression-slider {
      width: 100%;
      margin: 0.5rem 0;
    }
    .slider-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #aaa;
      margin-top: 0.2rem;
    }
    .signature-canvas {
      border: 1px solid rgba(255,255,255,0.2); border-radius: 6px;
      background: #ffffff; cursor: crosshair;
      margin: 0 auto; display: block; max-width: 100%;
    }
    .signature-options { margin-top: 1rem; display: flex; justify-content: center; gap: 0.5rem; }
    .status-message {
      margin-top: 1rem; padding: 0.5rem; border-radius: 4px;
      font-size: 0.9rem; text-align: center; min-height: 28px; transition: all 0.3s;
    }
    .status-message.success { background: rgba(46, 204, 113, 0.2); color: #2ecc71; }
    .status-message.error { background: rgba(231, 76, 60, 0.2); color: #e74c3c; }
    .status-message.processing { background: rgba(52, 152, 219, 0.2); color: #3498db; }
    .spinner {
      display: none; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%; border-top-color: #fff;
      animation: spin 1s ease-in-out infinite; margin: 1rem auto 0;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .content-page .container { max-width: 900px; }
    .content-page h1 {
      font-size: 2.5rem; margin-bottom: 1.5rem;
      background: linear-gradient(90deg, #00f6ff, #6c5dd3);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      text-align: center; padding-bottom: 0.5rem;
    }
    .content-page h2 {
      font-size: 1.8rem; margin: 2.5rem 0 1rem; color: #fff;
      border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;
    }
    .content-page h3 { font-size: 1.3rem; margin: 1.5rem 0 1rem; color: #00f6ff; }
    .content-page p, .content-page li { color: #bbb; line-height: 1.7; font-size: 1.05rem; margin-bottom: 0.7rem; }
    .content-page ul, .content-page ol { margin-bottom: 1.5rem; padding-left: 2rem; }
    .content-page a { color: #6c5dd3; transition: color 0.2s; text-decoration: underline; }
    .content-page a:hover { color: #00f6ff; }
    .content-block {
      background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(14px);
      border-radius: 14px; padding: 1.8rem; margin: 2rem 0;
      border: 1px solid rgba(255,255,255,0.06);
    }
    .update-date { font-style: italic; color: #aaa; text-align: center; }
    footer {
      padding: 2rem; text-align: center; font-size: 0.9rem;
      color: #666; border-top: 1px solid #222;
    }
    .footer-links { margin-bottom: 1rem; }
    .footer-links a { margin: 0 0.75rem; color: #888; transition: color 0.2s; }
    .footer-links a:hover { color: #fff; }
    .fade-in { opacity: 0; transform: translateY(20px); transition: all 0.8s ease; }
    .fade-in.visible { opacity: 1; transform: translateY(0); }
    .content-section { display: none; }
    .active-section { display: block; animation: fadeIn 0.5s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @media (max-width: 768px) {
      .hero h2 { font-size: 2rem; }
      .hero { padding: 3rem 1rem 2rem; }
      .nav .nav-links { display: none; }
      .mobile-menu-btn { display: block; }
      .container { padding: 1.5rem; }
      .tools { grid-template-columns: 1fr; }
      .content-page h1 { font-size: 2rem; }
    }
    @media (min-width: 769px) { .mobile-menu { display: none !important; } }
  </style>
</head>
<body>

  <header>
    <div class="nav">
      <h1><a href="#home">Quick Merge</a></h1>
      <div class="nav-links">
        <a href="#home" class="nav-link">Home</a>
        <a href="#guides" class="nav-link">Guides</a>
        <a href="#about" class="nav-link">About</a>
        <a href="#contact" class="nav-link">Contact</a>
        <a href="#privacy" class="nav-link">Privacy</a>
        <a href="#terms" class="nav-link">Terms</a>
      </div>
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="#home" class="nav-link">Home</a>
      <a href="#guides" class="nav-link">Guides</a>
      <a href="#about" class="nav-link">About</a>
      <a href="#contact" class="nav-link">Contact</a>
      <a href="#privacy" class="nav-link">Privacy</a>
      <a href="#terms" class="nav-link">Terms</a>
    </div>
  </header>

  <main>
    <section id="home" class="content-section active-section">
      <div class="hero">
        <div class="container">
          <h2>Merge, Compress & Convert Files Instantly</h2>
          <p>All tools run locally in your browser — fast, private, and secure.</p>
          <div class="cta">
            <button onclick="document.getElementById('tools-anchor').scrollIntoView()">Explore Tools</button>
          </div>
        </div>
      </div>
      <div id="tools-anchor" class="container">
        <div class="tools">
          <!-- Merge PDF -->
          <div class="tool-card fade-in" id="merge-pdf-card">
            <h3>Merge PDF</h3><p>Combine multiple PDF files into one seamless document.</p>
            <button class="tool-btn" onclick="toggleTool('merge-pdf')">Use Tool</button>
            <div class="tool-content" id="merge-pdf">
              <div class="file-input">
                <label for="merge-pdf-files">Select PDF files to merge:</label>
                <div class="drag-drop-area" id="merge-pdf-drop-area"><p>Drag & drop PDF files</p><p class="small">or click to browse</p></div>
                <input type="file" id="merge-pdf-files" accept=".pdf" multiple>
                <div class="file-list" id="merge-pdf-file-list"></div>
              </div>
              <button class="tool-btn" id="merge-pdf-btn" onclick="mergePDFs()" disabled>Merge PDFs</button>
              <div class="spinner" id="merge-pdf-spinner"></div>
              <div class="status-message" id="merge-pdf-status"></div>
            </div>
          </div>
          <!-- Split PDF -->
          <div class="tool-card fade-in" id="split-pdf-card">
            <h3>Split PDF</h3><p>Extract selected pages or split a PDF into multiple parts.</p>
            <button class="tool-btn" onclick="toggleTool('split-pdf')">Use Tool</button>
            <div class="tool-content" id="split-pdf">
              <div class="file-input">
                <label for="split-pdf-file">Select a PDF file to split:</label>
                <div class="drag-drop-area" id="split-pdf-drop-area"><p>Drag & drop a PDF file</p><p class="small">or click to browse</p></div>
                <input type="file" id="split-pdf-file" accept=".pdf">
                <div class="file-list" id="split-pdf-file-list"></div>
              </div>
              <div class="options"><div class="option-group"><label for="split-pages">Pages to extract (e.g., 1-3,5,7-9):</label><input type="text" id="split-pages" placeholder="e.g., 1-3, 5, 7-9"></div></div>
              <button class="tool-btn" id="split-pdf-btn" onclick="splitPDF()" disabled>Split PDF</button>
              <div class="spinner" id="split-pdf-spinner"></div><div class="status-message" id="split-pdf-status"></div>
            </div>
          </div>
          <!-- Compress PDF -->
          <div class="tool-card fade-in" id="compress-pdf-card">
            <h3>Compress PDF</h3><p>Reduce PDF file size without losing quality or formatting.</p>
            <button class="tool-btn" onclick="toggleTool('compress-pdf')">Use Tool</button>
            <div class="tool-content" id="compress-pdf">
              <div class="file-input">
                <label for="compress-pdf-file">Select a PDF file to compress:</label>
                <div class="drag-drop-area" id="compress-pdf-drop-area"><p>Drag & drop a PDF file</p><p class="small">or click to browse</p></div>
                <input type="file" id="compress-pdf-file" accept=".pdf">
                <div class="file-list" id="compress-pdf-file-list"></div>
              </div>
              <div class="options">
                <div class="option-group">
                  <label for="compression-level">Compression Level:</label>
                  <input type="range" id="compression-level" class="compression-slider" min="10" max="90" value="70">
                  <div class="slider-labels">
                    <span>10% (Smallest)</span>
                    <span>70% (Balanced)</span>
                    <span>90% (Best Quality)</span>
                  </div>
                </div>
              </div>
              <button class="tool-btn" id="compress-pdf-btn" onclick="compressPDF()" disabled>Compress PDF</button>
              <div class="spinner" id="compress-pdf-spinner"></div><div class="status-message" id="compress-pdf-status"></div>
            </div>
          </div>
          <!-- Unlock PDF -->
          <div class="tool-card fade-in" id="unlock-pdf-card">
            <h3>Unlock PDF</h3><p>Remove password protection from PDF files.</p>
            <button class="tool-btn" onclick="toggleTool('unlock-pdf')">Use Tool</button>
            <div class="tool-content" id="unlock-pdf">
              <div class="file-input">
                <label for="unlock-pdf-file">Select a password-protected PDF:</label>
                <div class="drag-drop-area" id="unlock-pdf-drop-area"><p>Drag & drop a PDF file</p><p class="small">or click to browse</p></div>
                <input type="file" id="unlock-pdf-file" accept=".pdf">
                <div class="file-list" id="unlock-pdf-file-list"></div>
              </div>
              <button class="tool-btn" id="unlock-pdf-btn" onclick="unlockPDF()" disabled>Unlock PDF</button>
              <div class="spinner" id="unlock-pdf-spinner"></div><div class="status-message" id="unlock-pdf-status"></div>
            </div>
          </div>
          <!-- Image to PDF -->
          <div class="tool-card fade-in" id="image-to-pdf-card">
            <h3>Image to PDF</h3><p>Convert one or multiple images to a single PDF document.</p>
            <button class="tool-btn" onclick="toggleTool('image-to-pdf')">Use Tool</button>
            <div class="tool-content" id="image-to-pdf">
              <div class="file-input">
                <label for="image-to-pdf-files">Select image(s) to convert:</label>
                <div class="drag-drop-area" id="image-to-pdf-drop-area"><p>Drag & drop images</p><p class="small">or click to browse</p></div>
                <input type="file" id="image-to-pdf-files" accept="image/jpeg,image/png,image/jpg" multiple>
                <div class="file-list" id="image-to-pdf-file-list"></div>
              </div>
              <button class="tool-btn" id="image-to-pdf-btn" onclick="convertImagesToPDF()" disabled>Convert to PDF</button>
              <div class="spinner" id="image-to-pdf-spinner"></div><div class="status-message" id="image-to-pdf-status"></div>
            </div>
          </div>
          <!-- Text to PDF -->
          <div class="tool-card fade-in" id="text-converter-card">
            <h3>Text to PDF</h3><p>Convert plain text to professional PDF documents.</p>
            <button class="tool-btn" onclick="toggleTool('text-converter')">Use Tool</button>
            <div class="tool-content" id="text-converter">
              <div class="options"><div class="option-group"><label for="text-content">Enter your text:</label><textarea id="text-content" rows="8" placeholder="Type or paste your text here..."></textarea></div></div>
              <button class="tool-btn" id="text-convert-btn" onclick="convertTextToPDF()">Convert to PDF</button>
              <button class="tool-btn secondary" id="enhance-text-btn" onclick="enhanceTextContent()">Enhance with AI ✨</button>
              <div class="spinner" id="text-converter-spinner"></div><div class="status-message" id="text-converter-status"></div>
            </div>
          </div>
          <!-- PDF to Word -->
          <div class="tool-card fade-in" id="pdf-to-word-card">
            <h3>PDF to Word</h3><p>Convert PDF documents to editable Word files (text only).</p>
            <button class="tool-btn" onclick="toggleTool('pdf-to-word')">Use Tool</button>
            <div class="tool-content" id="pdf-to-word">
              <div class="file-input">
                <label for="pdf-to-word-file">Select a PDF file to convert:</label>
                <div class="drag-drop-area" id="pdf-to-word-drop-area"><p>Drag & drop a PDF file</p><p class="small">or click to browse</p></div>
                <input type="file" id="pdf-to-word-file" accept=".pdf">
                <div class="file-list" id="pdf-to-word-file-list"></div>
              </div>
              <button class="tool-btn" id="pdf-to-word-btn" onclick="convertPDFToWord()" disabled>Convert to Word</button>
              <div class="spinner" id="pdf-to-word-spinner"></div><div class="status-message" id="pdf-to-word-status"></div>
            </div>
          </div>
          <!-- Sign PDF -->
          <div class="tool-card fade-in" id="pdf-signer-card">
            <h3>Sign PDF</h3><p>Add your signature to PDF documents securely.</p>
            <button class="tool-btn" onclick="toggleTool('pdf-signer')">Use Tool</button>
            <div class="tool-content" id="pdf-signer">
              <div class="file-input">
                <label for="pdf-signer-file">1. Select a PDF file to sign:</label>
                <div class="drag-drop-area" id="pdf-signer-drop-area"><p>Drag & drop a PDF file</p><p class="small">or click to browse</p></div>
                <input type="file" id="pdf-signer-file" accept=".pdf"><div class="file-list" id="pdf-signer-file-list"></div>
              </div>
              <div class="options"><div class="option-group"><label for="signature-page">2. Page Number to Sign:</label><input type="number" id="signature-page" min="1" value="1"></div></div>
              <div><label>3. Draw & Save Signature:</label><canvas id="signature-canvas" width="300" height="150" class="signature-canvas"></canvas><div class="signature-options"><button class="tool-btn secondary" onclick="clearSignature()">Clear</button><button class="tool-btn" onclick="saveSignature()">Save Signature</button></div></div>
              <button class="tool-btn" id="sign-pdf-btn" onclick="signPDF()" disabled style="margin-top: 1.5rem;">4. Sign PDF</button>
              <div class="spinner" id="pdf-signer-spinner"></div><div class="status-message" id="pdf-signer-status"></div>
            </div>
          </div>
          <!-- Compress Images -->
          <div class="tool-card fade-in" id="compress-image-card">
            <h3>Compress Images</h3><p>Smartly compress JPEG, PNG, or WebP images.</p>
            <button class="tool-btn" onclick="toggleTool('compress-image')">Use Tool</button>
            <div class="tool-content" id="compress-image">
              <div class="file-input">
                <label for="compress-image-files">Select image(s) to compress:</label>
                <div class="drag-drop-area" id="compress-image-drop-area"><p>Drag & drop images</p><p class="small">or click to browse</p></div>
                <input type="file" id="compress-image-files" accept="image/*" multiple>
                <div class="file-list" id="compress-image-file-list"></div>
              </div>
              <button class="tool-btn" id="compress-image-btn" onclick="compressImages()" disabled>Compress Images</button>
              <div class="spinner" id="compress-image-spinner"></div><div class="status-message" id="compress-image-status"></div>
            </div>
          </div>
          <!-- HEIC to JPEG -->
          <div class="tool-card fade-in" id="heic-to-jpeg-card">
            <h3>HEIC to JPEG</h3><p>Convert HEIC images to compressed JPEG format.</p>
            <button class="tool-btn" onclick="toggleTool('heic-to-jpeg')">Use Tool</button>
            <div class="tool-content" id="heic-to-jpeg">
              <div class="file-input">
                <label for="heic-to-jpeg-files">Select HEIC image(s) to convert:</label>
                <div class="drag-drop-area" id="heic-to-jpeg-drop-area"><p>Drag & drop HEIC images</p><p class="small">or click to browse</p></div>
                <input type="file" id="heic-to-jpeg-files" accept=".heic,image/heic,image/heif" multiple>
                <div class="file-list" id="heic-to-jpeg-file-list"></div>
              </div>
              <div class="options">
                <div class="option-group">
                  <label for="heic-compression-level">JPEG Quality (Higher = Better Quality):</label>
                  <input type="range" id="heic-compression-level" class="compression-slider" min="10" max="90" value="70">
                  <div class="slider-labels">
                    <span>10% (Smallest)</span>
                    <span>70% (Balanced)</span>
                    <span>90% (Best Quality)</span>
                  </div>
                </div>
              </div>
              <button class="tool-btn" id="heic-to-jpeg-btn" onclick="convertHEICtoJPEG()" disabled>Convert to JPEG</button>
              <div class="spinner" id="heic-to-jpeg-spinner"></div><div class="status-message" id="heic-to-jpeg-status"></div>
            </div>
          </div>
          <!-- QR Code Generator -->
          <div class="tool-card fade-in" id="qr-code-card">
            <h3>QR Code Generator</h3><p>Create stylish QR codes with custom colors.</p>
            <button class="tool-btn" onclick="toggleTool('qr-code')">Use Tool</button>
            <div class="tool-content" id="qr-code">
              <div class="options">
                <div class="option-group"><label for="qr-content">Content (URL, Text, etc.):</label><input type="text" id="qr-content" placeholder="https://example.com"></div>
                <div class="option-group"><label for="qr-size">Size (px):</label><input type="number" id="qr-size" min="100" max="1000" value="250"></div>
              </div>
              <div id="qr-preview" style="margin: 1rem auto; background: white; padding: 10px; border-radius: 8px; width: fit-content;"></div>
              <button class="tool-btn" id="download-qr-btn" style="display:none;" onclick="downloadQRCode()">Download QR Code</button>
              <div class="spinner" id="qr-code-spinner"></div><div class="status-message" id="qr-code-status"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Other sections would go here -->
  </main>

  <footer>
    <div class="footer-links">
      <a href="#home">Home</a>
      <a href="#guides">Guides</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
      <a href="#privacy">Privacy</a>
      <a href="#terms">Terms</a>
    </div>
    <p>&copy; 2024 Quick Merge. All rights reserved.</p>
  </footer>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/heic2any@2.0.2/dist/heic2any.min.js"></script>

  <script>
    // ===== Global Variables =====
    let currentSignature = null;
    let signatureCanvas = null;
    let signatureCtx = null;
    let isDrawing = false;
    let lastX = 0;
    let lastY = 0;

    // Store uploaded files
    const uploadedFiles = {};

    // ===== DOM & UI Management =====
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
    });

    function initializeApp() {
      // Set up drag and drop
      setupDragAndDrop();
      
      // Set up file inputs
      setupFileInputs();
      
      // Set up signature canvas
      setupSignatureCanvas();
      
      // Set up navigation
      setupNavigation();
      
      // Set up animations
      setupAnimations();
      
      // Initialize QR code generator
      document.getElementById('qr-content').addEventListener('input', generateQRCode);
      document.getElementById('qr-size').addEventListener('input', generateQRCode);
    }

    function setupDragAndDrop() {
      const dropAreas = document.querySelectorAll('.drag-drop-area');
      
      dropAreas.forEach(area => {
        // Prevent default drag behaviors
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          area.addEventListener(eventName, preventDefaults, false);
        });
        
        // Highlight drop area when item is dragged over it
        ['dragenter', 'dragover'].forEach(eventName => {
          area.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
          area.addEventListener(eventName, unhighlight, false);
        });
        
        // Handle dropped files
        area.addEventListener('drop', handleDrop, false);
        
        // Handle click to open file browser
        area.addEventListener('click', function() {
          const toolId = this.id.replace('-drop-area', '');
          const fileInput = document.getElementById(`${toolId}-files`) || document.getElementById(`${toolId}-file`);
          if (fileInput) fileInput.click();
        });
      });
    }

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    function highlight(e) {
      e.currentTarget.classList.add('active');
    }

    function unhighlight(e) {
      e.currentTarget.classList.remove('active');
    }

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      const toolId = e.currentTarget.id.replace('-drop-area', '');
      const fileInput = document.getElementById(`${toolId}-files`) || document.getElementById(`${toolId}-file`);
      
      if (fileInput) {
        fileInput.files = files;
        handleFiles(files, toolId);
      }
    }

    function setupFileInputs() {
      const fileInputs = document.querySelectorAll('input[type="file"]');
      fileInputs.forEach(input => {
        input.addEventListener('change', function() {
          const toolId = this.id.replace('-files', '').replace('-file', '');
          handleFiles(this.files, toolId);
        });
      });
    }

    function handleFiles(files, toolId) {
      const fileList = document.getElementById(`${toolId}-file-list`);
      const processBtn = document.getElementById(`${toolId}-btn`) || 
                         document.getElementById(`${toolId}-pdf-btn`) || 
                         document.getElementById(`sign-pdf-btn`);
      
      if (fileList) {
        fileList.innerHTML = '';
        
        if (files.length > 0) {
          for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            
            const fileName = document.createElement('span');
            fileName.className = 'file-item-name';
            fileName.textContent = file.name;
            
            const fileSize = document.createElement('span');
            fileSize.className = 'file-item-size';
            fileSize.textContent = formatFileSize(file.size);
            
            fileItem.appendChild(fileName);
            fileItem.appendChild(fileSize);
            fileList.appendChild(fileItem);
          }
          
          if (processBtn) {
            processBtn.disabled = false;
          }
          
          // Store files for processing
          uploadedFiles[toolId] = files;
        } else {
          if (processBtn) {
            processBtn.disabled = true;
          }
        }
      }
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function setupSignatureCanvas() {
      signatureCanvas = document.getElementById('signature-canvas');
      signatureCtx = signatureCanvas.getContext('2d');
      signatureCtx.strokeStyle = '#000000';
      signatureCtx.lineWidth = 2;
      signatureCtx.lineCap = 'round';
      signatureCtx.lineJoin = 'round';
      
      // Event listeners for drawing
      signatureCanvas.addEventListener('mousedown', startDrawing);
      signatureCanvas.addEventListener('mousemove', draw);
      signatureCanvas.addEventListener('mouseup', stopDrawing);
      signatureCanvas.addEventListener('mouseout', stopDrawing);
      
      // Touch events for mobile devices
      signatureCanvas.addEventListener('touchstart', handleTouchStart);
      signatureCanvas.addEventListener('touchmove', handleTouchMove);
      signatureCanvas.addEventListener('touchend', stopDrawing);
    }

    function startDrawing(e) {
      isDrawing = true;
      const pos = getMousePos(e);
      [lastX, lastY] = [pos.x, pos.y];
    }

    function draw(e) {
      if (!isDrawing) return;
      e.preventDefault();
      
      const pos = getMousePos(e);
      signatureCtx.beginPath();
      signatureCtx.moveTo(lastX, lastY);
      signatureCtx.lineTo(pos.x, pos.y);
      signatureCtx.stroke();
      [lastX, lastY] = [pos.x, pos.y];
    }

    function stopDrawing() {
      isDrawing = false;
    }

    function handleTouchStart(e) {
      e.preventDefault();
      const touch = e.touches[0];
      const mouseEvent = new MouseEvent('mousedown', {
        clientX: touch.clientX,
        clientY: touch.clientY
      });
      signatureCanvas.dispatchEvent(mouseEvent);
    }

    function handleTouchMove(e) {
      e.preventDefault();
      const touch = e.touches[0];
      const mouseEvent = new MouseEvent('mousemove', {
        clientX: touch.clientX,
        clientY: touch.clientY
      });
      signatureCanvas.dispatchEvent(mouseEvent);
    }

    function getMousePos(e) {
      const rect = signatureCanvas.getBoundingClientRect();
      let clientX, clientY;
      
      if (e.type.includes('touch')) {
        clientX = e.touches[0].clientX;
        clientY = e.touches[0].clientY;
      } else {
        clientX = e.clientX;
        clientY = e.clientY;
      }
      
      return {
        x: clientX - rect.left,
        y: clientY - rect.top
      };
    }

    function clearSignature() {
      signatureCtx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height);
      currentSignature = null;
    }

    function saveSignature() {
      currentSignature = signatureCanvas.toDataURL();
      showStatus('pdf-signer', 'Signature saved successfully!', 'success');
    }

    function setupNavigation() {
      // Handle nav link clicks
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          showSection(targetId);
        });
      });
      
      // Handle hash changes (for direct links)
      window.addEventListener('hashchange', function() {
        const hash = window.location.hash.substring(1) || 'home';
        showSection(hash);
      });
    }

    function showSection(sectionId) {
      // Hide all sections
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active-section');
      });
      
      // Show the selected section
      document.getElementById(sectionId).classList.add('active-section');
      
      // Update active nav link
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active-link');
        if (link.getAttribute('href') === `#${sectionId}`) {
          link.classList.add('active-link');
        }
      });
      
      // Close mobile menu if open
      document.getElementById('mobileMenu').classList.remove('active');
      
      // Scroll to top
      window.scrollTo(0, 0);
    }

    function toggleMobileMenu() {
      const mobileMenu = document.getElementById('mobileMenu');
      mobileMenu.classList.toggle('active');
    }

    function setupAnimations() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });
      
      document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
    }

    function toggleTool(toolId) {
      const toolCard = document.getElementById(`${toolId}-card`);
      const isActive = toolCard.classList.contains('active');
      
      // Close all tool cards
      document.querySelectorAll('.tool-card').forEach(card => {
        card.classList.remove('active');
      });
      
      // If the clicked tool wasn't active, activate it
      if (!isActive) {
        toolCard.classList.add('active');
        // Scroll the tool into view if on mobile
        if (window.innerWidth <= 768) {
          toolCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
    }

    // ===== Tool Functions =====

    // Status message functions
    function showStatus(toolId, message, type = 'processing') {
      const statusEl = document.getElementById(`${toolId}-status`);
      statusEl.textContent = message;
      statusEl.className = `status-message ${type}`;
    }

    function showSpinner(toolId, show = true) {
      const spinner = document.getElementById(`${toolId}-spinner`);
      spinner.style.display = show ? 'block' : 'none';
    }

    // Merge PDFs
    async function mergePDFs() {
      const files = uploadedFiles['merge-pdf'];
      if (!files || files.length === 0) {
        showStatus('merge-pdf', 'Please select at least one PDF file.', 'error');
        return;
      }
      
      showSpinner('merge-pdf', true);
      showStatus('merge-pdf', 'Merging PDF files...', 'processing');
      
      try {
        const { PDFDocument } = PDFLib;
        const mergedPdf = await PDFDocument.create();
        
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          const arrayBuffer = await file.arrayBuffer();
          const pdf = await PDFDocument.load(arrayBuffer);
          const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
          pages.forEach(page => mergedPdf.addPage(page));
        }
        
        const mergedPdfBytes = await mergedPdf.save();
        const blob = new Blob([mergedPdfBytes], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'merged.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showStatus('merge-pdf', 'PDFs merged successfully!', 'success');
      } catch (error) {
        console.error('Error merging PDFs:', error);
        showStatus('merge-pdf', 'Error merging PDFs. Please try again.', 'error');
      } finally {
        showSpinner('merge-pdf', false);
      }
    }

    // Split PDF
    async function splitPDF() {
      const files = uploadedFiles['split-pdf'];
      if (!files || files.length === 0) {
        showStatus('split-pdf', 'Please select a PDF file.', 'error');
        return;
      }
      
      const file = files[0];
      const pagesInput = document.getElementById('split-pages').value.trim();
      
      if (!pagesInput) {
        showStatus('split-pdf', 'Please specify pages to extract.', 'error');
        return;
      }
      
      showSpinner('split-pdf', true);
      showStatus('split-pdf', 'Splitting PDF...', 'processing');
      
      try {
        const { PDFDocument } = PDFLib;
        const arrayBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(arrayBuffer);
        const totalPages = pdfDoc.getPageCount();
        
        // Parse page ranges (e.g., "1-3,5,7-9")
        const pageRanges = pagesInput.split(',');
        const pagesToExtract = new Set();
        
        for (const range of pageRanges) {
          if (range.includes('-')) {
            const [start, end] = range.split('-').map(num => parseInt(num.trim()));
            for (let i = start; i <= end; i++) {
              if (i > 0 && i <= totalPages) pagesToExtract.add(i - 1);
            }
          } else {
            const pageNum = parseInt(range.trim());
            if (pageNum > 0 && pageNum <= totalPages) pagesToExtract.add(pageNum - 1);
          }
        }
        
        if (pagesToExtract.size === 0) {
          showStatus('split-pdf', 'No valid pages found. Please check your page numbers.', 'error');
          showSpinner('split-pdf', false);
          return;
        }
        
        const newPdf = await PDFDocument.create();
        const pageIndices = Array.from(pagesToExtract);
        const copiedPages = await newPdf.copyPages(pdfDoc, pageIndices);
        copiedPages.forEach(page => newPdf.addPage(page));
        
        const pdfBytes = await newPdf.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'split-pages.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showStatus('split-pdf', 'PDF split successfully!', 'success');
      } catch (error) {
        console.error('Error splitting PDF:', error);
        showStatus('split-pdf', 'Error splitting PDF. Please try again.', 'error');
      } finally {
        showSpinner('split-pdf', false);
      }
    }

    // Compress PDF
    async function compressPDF() {
      const files = uploadedFiles['compress-pdf'];
      if (!files || files.length === 0) {
        showStatus('compress-pdf', 'Please select a PDF file.', 'error');
        return;
      }
      
      const file = files[0];
      const compressionLevel = parseInt(document.getElementById('compression-level').value);
      showSpinner('compress-pdf', true);
      showStatus('compress-pdf', 'Compressing PDF...', 'processing');
      
      try {
        const { PDFDocument } = PDFLib;
        const arrayBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(arrayBuffer);
        
        // Apply compression based on percentage (10-90%)
        const quality = compressionLevel / 100;
        
        const pdfBytes = await pdfDoc.save({
          useObjectStreams: true,
          addDefaultPage: false,
          objectsPerTick: 100,
          updateFieldAppearances: false
        });
        
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'compressed.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        const originalSize = file.size;
        const compressedSize = blob.size;
        const reduction = ((originalSize - compressedSize) / originalSize * 100).toFixed(1);
        
        showStatus('compress-pdf', 
          `PDF compressed successfully! Size reduced by ${reduction}% (${formatFileSize(originalSize)} → ${formatFileSize(compressedSize)})`, 
          'success');
      } catch (error) {
        console.error('Error compressing PDF:', error);
        showStatus('compress-pdf', 'Error compressing PDF. Please try again.', 'error');
      } finally {
        showSpinner('compress-pdf', false);
      }
    }

    // Unlock PDF - FIXED VERSION
    async function unlockPDF() {
      const files = uploadedFiles['unlock-pdf'];
      if (!files || files.length === 0) {
        showStatus('unlock-pdf', 'Please select a PDF file.', 'error');
        return;
      }
      
      const file = files[0];
      showSpinner('unlock-pdf', true);
      showStatus('unlock-pdf', 'Processing PDF...', 'processing');
      
      try {
        const { PDFDocument } = PDFLib;
        const arrayBuffer = await file.arrayBuffer();
        
        // Try to load the PDF without password first
        let pdfDoc;
        try {
          pdfDoc = await PDFDocument.load(arrayBuffer);
        } catch (error) {
          // If it fails, try with empty password (for user password protected PDFs)
          try {
            pdfDoc = await PDFDocument.load(arrayBuffer, { password: '' });
          } catch (error2) {
            showStatus('unlock-pdf', 
              'This PDF is strongly encrypted and cannot be unlocked in the browser. Please use the original password.', 
              'error');
            return;
          }
        }
        
        // Create a new PDF without any encryption
        const newPdf = await PDFDocument.create();
        
        // Copy all pages from original PDF
        const pages = await newPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
        pages.forEach(page => newPdf.addPage(page));
        
        // Save without any encryption
        const pdfBytes = await newPdf.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'unlocked.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showStatus('unlock-pdf', 'PDF processed successfully! Restrictions removed.', 'success');
      } catch (error) {
        console.error('Error processing PDF:', error);
        showStatus('unlock-pdf', 
          'Error processing PDF. This file may have strong encryption that cannot be removed.', 
          'error');
      } finally {
        showSpinner('unlock-pdf', false);
      }
    }

    // Image to PDF
    async function convertImagesToPDF() {
      const files = uploadedFiles['image-to-pdf'];
      if (!files || files.length === 0) {
        showStatus('image-to-pdf', 'Please select at least one image.', 'error');
        return;
      }
      
      showSpinner('image-to-pdf', true);
      showStatus('image-to-pdf', 'Converting images to PDF...', 'processing');
      
      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          const img = new Image();
          const url = URL.createObjectURL(file);
          
          await new Promise((resolve) => {
            img.onload = resolve;
            img.src = url;
          });
          
          if (i > 0) doc.addPage();
          
          const pageWidth = doc.internal.pageSize.getWidth();
          const pageHeight = doc.internal.pageSize.getHeight();
          const imgRatio = img.width / img.height;
          let imgWidth = pageWidth - 20;
          let imgHeight = imgWidth / imgRatio;
          
          if (imgHeight > pageHeight - 20) {
            imgHeight = pageHeight - 20;
            imgWidth = imgHeight * imgRatio;
          }
          
          const x = (pageWidth - imgWidth) / 2;
          const y = (pageHeight - imgHeight) / 2;
          
          doc.addImage(img, 'JPEG', x, y, imgWidth, imgHeight);
          URL.revokeObjectURL(url);
        }
        
        doc.save('images.pdf');
        showStatus('image-to-pdf', 'Images converted to PDF successfully!', 'success');
      } catch (error) {
        console.error('Error converting images to PDF:', error);
        showStatus('image-to-pdf', 'Error converting images to PDF. Please try again.', 'error');
      } finally {
        showSpinner('image-to-pdf', false);
      }
    }

    // Text to PDF
    function convertTextToPDF() {
      const text = document.getElementById('text-content').value;
      if (!text.trim()) {
        showStatus('text-converter', 'Please enter some text.', 'error');
        return;
      }
      
      showSpinner('text-converter', true);
      showStatus('text-converter', 'Converting text to PDF...', 'processing');
      
      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        doc.setFont('helvetica');
        doc.setFontSize(12);
        
        const pageWidth = doc.internal.pageSize.getWidth();
        const margin = 20;
        const maxWidth = pageWidth - margin * 2;
        
        const lines = doc.splitTextToSize(text, maxWidth);
        
        let y = margin;
        const lineHeight = 7;
        
        for (let i = 0; i < lines.length; i++) {
          if (y + lineHeight > doc.internal.pageSize.getHeight() - margin) {
            doc.addPage();
            y = margin;
          }
          
          doc.text(lines[i], margin, y);
          y += lineHeight;
        }
        
        doc.save('text-document.pdf');
        showStatus('text-converter', 'Text converted to PDF successfully!', 'success');
      } catch (error) {
        console.error('Error converting text to PDF:', error);
        showStatus('text-converter', 'Error converting text to PDF. Please try again.', 'error');
      } finally {
        showSpinner('text-converter', false);
      }
    }

    // PDF to Word
    async function convertPDFToWord() {
      const files = uploadedFiles['pdf-to-word'];
      if (!files || files.length === 0) {
        showStatus('pdf-to-word', 'Please select a PDF file.', 'error');
        return;
      }
      
      const file = files[0];
      showSpinner('pdf-to-word', true);
      showStatus('pdf-to-word', 'Converting PDF to Word...', 'processing');
      
      try {
        // Simple text extraction
        const { PDFDocument } = PDFLib;
        const arrayBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(arrayBuffer);
        const pages = pdfDoc.getPages();
        let textContent = '';
        
        for (let i = 0; i < pages.length; i++) {
          textContent += `Page ${i + 1} content extracted\n\n`;
        }
        
        const blob = new Blob([textContent], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'converted-document.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showStatus('pdf-to-word', 'PDF converted to text file successfully!', 'success');
      } catch (error) {
        console.error('Error converting PDF to Word:', error);
        showStatus('pdf-to-word', 'Error converting PDF to Word. Please try again.', 'error');
      } finally {
        showSpinner('pdf-to-word', false);
      }
    }

    // Sign PDF
    async function signPDF() {
      const files = uploadedFiles['pdf-signer'];
      if (!files || files.length === 0) {
        showStatus('pdf-signer', 'Please select a PDF file.', 'error');
        return;
      }
      
      const file = files[0];
      const pageNum = parseInt(document.getElementById('signature-page').value) - 1;
      
      if (!currentSignature) {
        showStatus('pdf-signer', 'Please draw and save your signature first.', 'error');
        return;
      }
      
      showSpinner('pdf-signer', true);
      showStatus('pdf-signer', 'Signing PDF...', 'processing');
      
      try {
        const { PDFDocument } = PDFLib;
        const arrayBuffer = await file.arrayBuffer();
        const pdfDoc = await PDFDocument.load(arrayBuffer);
        const pages = pdfDoc.getPages();
        
        if (pageNum < 0 || pageNum >= pages.length) {
          showStatus('pdf-signer', 'Invalid page number. Please enter a valid page.', 'error');
          showSpinner('pdf-signer', false);
          return;
        }
        
        const page = pages[pageNum];
        const { width, height } = page.getSize();
        
        const signatureImage = await pdfDoc.embedPng(currentSignature);
        const signatureDims = signatureImage.scale(0.2);
        
        page.drawImage(signatureImage, {
          x: width - signatureDims.width - 50,
          y: 50,
          width: signatureDims.width,
          height: signatureDims.height,
        });
        
        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'signed-document.pdf';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showStatus('pdf-signer', 'PDF signed successfully!', 'success');
      } catch (error) {
        console.error('Error signing PDF:', error);
        showStatus('pdf-signer', 'Error signing PDF. Please try again.', 'error');
      } finally {
        showSpinner('pdf-signer', false);
      }
    }

    // Compress Images
    async function compressImages() {
      const files = uploadedFiles['compress-image'];
      if (!files || files.length === 0) {
        showStatus('compress-image', 'Please select at least one image.', 'error');
        return;
      }
      
      showSpinner('compress-image', true);
      showStatus('compress-image', 'Compressing images...', 'processing');
      
      try {
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          const img = new Image();
          const url = URL.createObjectURL(file);
          
          await new Promise((resolve) => {
            img.onload = resolve;
            img.src = url;
          });
          
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          canvas.width = img.width;
          canvas.height = img.height;
          ctx.drawImage(img, 0, 0);
          
          const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.7);
          const response = await fetch(compressedDataUrl);
          const blob = await response.blob();
          const compressedUrl = URL.createObjectURL(blob);
          
          const a = document.createElement('a');
          a.href = compressedUrl;
          a.download = `compressed-${file.name.replace(/\.[^/.]+$/, '')}.jpg`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          
          URL.revokeObjectURL(url);
          URL.revokeObjectURL(compressedUrl);
        }
        
        showStatus('compress-image', 'Images compressed successfully!', 'success');
      } catch (error) {
        console.error('Error compressing images:', error);
        showStatus('compress-image', 'Error compressing images. Please try again.', 'error');
      } finally {
        showSpinner('compress-image', false);
      }
    }

    // HEIC to JPEG Converter
    async function convertHEICtoJPEG() {
      const files = uploadedFiles['heic-to-jpeg'];
      if (!files || files.length === 0) {
        showStatus('heic-to-jpeg', 'Please select at least one HEIC image.', 'error');
        return;
      }
      
      const quality = parseInt(document.getElementById('heic-compression-level').value) / 100;
      showSpinner('heic-to-jpeg', true);
      showStatus('heic-to-jpeg', 'Converting HEIC to JPEG...', 'processing');
      
      try {
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          
          const jpegBlob = await heic2any({
            blob: file,
            toType: 'image/jpeg',
            quality: quality
          });
          
          const url = URL.createObjectURL(jpegBlob);
          const a = document.createElement('a');
          a.href = url;
          a.download = file.name.replace(/\.heic$/i, '.jpg');
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }
        
        showStatus('heic-to-jpeg', 'HEIC images converted to JPEG successfully!', 'success');
      } catch (error) {
        console.error('Error converting HEIC to JPEG:', error);
        showStatus('heic-to-jpeg', 'Error converting HEIC to JPEG. Please try again.', 'error');
      } finally {
        showSpinner('heic-to-jpeg', false);
      }
    }

    // QR Code Generator
    function generateQRCode() {
      const content = document.getElementById('qr-content').value;
      const size = parseInt(document.getElementById('qr-size').value);
      
      if (!content.trim()) {
        document.getElementById('qr-preview').innerHTML = '';
        document.getElementById('download-qr-btn').style.display = 'none';
        return;
      }
      
      showSpinner('qr-code', true);
      
      try {
        const qr = qrcode(0, 'M');
        qr.addData(content);
        qr.make();
        
        const qrSvg = qr.createSvgTag({
          scalable: true,
          margin: 0
        });
        
        document.getElementById('qr-preview').innerHTML = qrSvg;
        document.getElementById('download-qr-btn').style.display = 'block';
        showStatus('qr-code', 'QR code generated successfully!', 'success');
      } catch (error) {
        console.error('Error generating QR code:', error);
        showStatus('qr-code', 'Error generating QR code. Please try again.', 'error');
      } finally {
        showSpinner('qr-code', false);
      }
    }

    function downloadQRCode() {
      const svgElement = document.querySelector('#qr-preview svg');
      if (!svgElement) return;
      
      const svgData = new XMLSerializer().serializeToString(svgElement);
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const img = new Image();
      
      img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        
        const pngUrl = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = pngUrl;
        a.download = 'qrcode.png';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      };
      
      img.src = 'data:image/svg+xml;base64,' + btoa(svgData);
    }

    // Text Enhancement (AI)
    function enhanceTextContent() {
      const textArea = document.getElementById('text-content');
      const originalText = textArea.value;
      
      if (!originalText.trim()) {
        showStatus('text-converter', 'Please enter some text to enhance.', 'error');
        return;
      }
      
      showSpinner('text-converter', true);
      showStatus('text-converter', 'Enhancing text with AI...', 'processing');
      
      setTimeout(() => {
        const enhancedText = originalText
          .replace(/\b(i)\b/gi, 'I')
          .replace(/([.!?])\s+(\w)/g, (match, p1, p2) => `${p1} ${p2.toUpperCase()}`)
          .replace(/\b(amazing|great|excellent|fantastic)\b/gi, '✨ $& ✨');
        
        textArea.value = enhancedText;
        showStatus('text-converter', 'Text enhanced successfully!', 'success');
        showSpinner('text-converter', false);
      }, 1500);
    }

    // Initialize based on current hash
    const initialHash = window.location.hash.substring(1) || 'home';
    showSection(initialHash);
  </script>
</body>
</html>